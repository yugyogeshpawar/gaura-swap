{"ast":null,"code":"import _asyncToGenerator from \"/Users/vaibhav/Desktop/Home/Blockchain Boutique/Uniswap_forked_gaura/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/vaibhav/Desktop/Home/Blockchain Boutique/Uniswap_forked_gaura/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/vaibhav/Desktop/Home/Blockchain Boutique/Uniswap_forked_gaura/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/vaibhav/Desktop/Home/Blockchain Boutique/Uniswap_forked_gaura/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, catch: function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\nimport { parsePersonalSign, parseTransactionData, convertArrayBufferToHex, convertHexToArrayBuffer, getClientMeta, payloadId, uuid, formatRpcError, parseWalletConnectUri, convertNumberToHex, isJsonRpcResponseSuccess, isJsonRpcResponseError, isSilentPayload, getLocal, signingMethods, mobileLinkChoiceKey, isMobile, removeLocal } from \"@walletconnect/utils\";\nimport SocketTransport from \"@walletconnect/socket-transport\";\nimport { ERROR_SESSION_CONNECTED, ERROR_SESSION_DISCONNECTED, ERROR_SESSION_REJECTED, ERROR_MISSING_JSON_RPC, ERROR_MISSING_RESULT, ERROR_MISSING_ERROR, ERROR_MISSING_METHOD, ERROR_MISSING_ID, ERROR_INVALID_RESPONSE, ERROR_INVALID_URI, ERROR_MISSING_REQUIRED, ERROR_QRCODE_MODAL_NOT_PROVIDED, ERROR_QRCODE_MODAL_USER_CLOSED } from \"./errors\";\nimport EventManager from \"./events\";\nimport SessionStorage from \"./storage\";\nimport { getBridgeUrl } from \"./url\";\n\nvar Connector = /*#__PURE__*/function () {\n  function Connector(opts) {\n    _classCallCheck(this, Connector);\n\n    this.protocol = \"wc\";\n    this.version = 1;\n    this._bridge = \"\";\n    this._key = null;\n    this._clientId = \"\";\n    this._clientMeta = null;\n    this._peerId = \"\";\n    this._peerMeta = null;\n    this._handshakeId = 0;\n    this._handshakeTopic = \"\";\n    this._connected = false;\n    this._accounts = [];\n    this._chainId = 0;\n    this._networkId = 0;\n    this._rpcUrl = \"\";\n    this._eventManager = new EventManager();\n    this._clientMeta = getClientMeta() || opts.connectorOpts.clientMeta || null;\n    this._cryptoLib = opts.cryptoLib;\n    this._sessionStorage = opts.sessionStorage || new SessionStorage(opts.connectorOpts.storageId);\n    this._qrcodeModal = opts.connectorOpts.qrcodeModal;\n    this._qrcodeModalOptions = opts.connectorOpts.qrcodeModalOptions;\n    this._signingMethods = [].concat(_toConsumableArray(signingMethods), _toConsumableArray(opts.connectorOpts.signingMethods || []));\n\n    if (!opts.connectorOpts.bridge && !opts.connectorOpts.uri && !opts.connectorOpts.session) {\n      throw new Error(ERROR_MISSING_REQUIRED);\n    }\n\n    if (opts.connectorOpts.bridge) {\n      this.bridge = getBridgeUrl(opts.connectorOpts.bridge);\n    }\n\n    if (opts.connectorOpts.uri) {\n      this.uri = opts.connectorOpts.uri;\n    }\n\n    var session = opts.connectorOpts.session || this._getStorageSession();\n\n    if (session) {\n      this.session = session;\n    }\n\n    if (this.handshakeId) {\n      this._subscribeToSessionResponse(this.handshakeId, \"Session request rejected\");\n    }\n\n    this._transport = opts.transport || new SocketTransport({\n      protocol: this.protocol,\n      version: this.version,\n      url: this.bridge,\n      subscriptions: [this.clientId]\n    });\n\n    this._subscribeToInternalEvents();\n\n    this._initTransport();\n\n    if (opts.connectorOpts.uri) {\n      this._subscribeToSessionRequest();\n    }\n\n    if (opts.pushServerOpts) {\n      this._registerPushServer(opts.pushServerOpts);\n    }\n  }\n\n  _createClass(Connector, [{\n    key: \"bridge\",\n    get: function get() {\n      return this._bridge;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n\n      this._bridge = value;\n    }\n  }, {\n    key: \"key\",\n    get: function get() {\n      if (this._key) {\n        var key = convertArrayBufferToHex(this._key, true);\n        return key;\n      }\n\n      return \"\";\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n\n      var key = convertHexToArrayBuffer(value);\n      this._key = key;\n    }\n  }, {\n    key: \"clientId\",\n    get: function get() {\n      var clientId = this._clientId;\n\n      if (!clientId) {\n        clientId = this._clientId = uuid();\n      }\n\n      return this._clientId;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n\n      this._clientId = value;\n    }\n  }, {\n    key: \"peerId\",\n    get: function get() {\n      return this._peerId;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n\n      this._peerId = value;\n    }\n  }, {\n    key: \"clientMeta\",\n    get: function get() {\n      var clientMeta = this._clientMeta;\n\n      if (!clientMeta) {\n        clientMeta = this._clientMeta = getClientMeta();\n      }\n\n      return clientMeta;\n    },\n    set: function set(value) {}\n  }, {\n    key: \"peerMeta\",\n    get: function get() {\n      var peerMeta = this._peerMeta;\n      return peerMeta;\n    },\n    set: function set(value) {\n      this._peerMeta = value;\n    }\n  }, {\n    key: \"handshakeTopic\",\n    get: function get() {\n      return this._handshakeTopic;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n\n      this._handshakeTopic = value;\n    }\n  }, {\n    key: \"handshakeId\",\n    get: function get() {\n      return this._handshakeId;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n\n      this._handshakeId = value;\n    }\n  }, {\n    key: \"uri\",\n    get: function get() {\n      var _uri = this._formatUri();\n\n      return _uri;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n\n      var _this$_parseUri = this._parseUri(value),\n          handshakeTopic = _this$_parseUri.handshakeTopic,\n          bridge = _this$_parseUri.bridge,\n          key = _this$_parseUri.key;\n\n      this.handshakeTopic = handshakeTopic;\n      this.bridge = bridge;\n      this.key = key;\n    }\n  }, {\n    key: \"chainId\",\n    get: function get() {\n      var chainId = this._chainId;\n      return chainId;\n    },\n    set: function set(value) {\n      this._chainId = value;\n    }\n  }, {\n    key: \"networkId\",\n    get: function get() {\n      var networkId = this._networkId;\n      return networkId;\n    },\n    set: function set(value) {\n      this._networkId = value;\n    }\n  }, {\n    key: \"accounts\",\n    get: function get() {\n      var accounts = this._accounts;\n      return accounts;\n    },\n    set: function set(value) {\n      this._accounts = value;\n    }\n  }, {\n    key: \"rpcUrl\",\n    get: function get() {\n      var rpcUrl = this._rpcUrl;\n      return rpcUrl;\n    },\n    set: function set(value) {\n      this._rpcUrl = value;\n    }\n  }, {\n    key: \"connected\",\n    get: function get() {\n      return this._connected;\n    },\n    set: function set(value) {}\n  }, {\n    key: \"pending\",\n    get: function get() {\n      return !!this._handshakeTopic;\n    },\n    set: function set(value) {}\n  }, {\n    key: \"session\",\n    get: function get() {\n      return {\n        connected: this.connected,\n        accounts: this.accounts,\n        chainId: this.chainId,\n        bridge: this.bridge,\n        key: this.key,\n        clientId: this.clientId,\n        clientMeta: this.clientMeta,\n        peerId: this.peerId,\n        peerMeta: this.peerMeta,\n        handshakeId: this.handshakeId,\n        handshakeTopic: this.handshakeTopic\n      };\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n\n      this._connected = value.connected;\n      this.accounts = value.accounts;\n      this.chainId = value.chainId;\n      this.bridge = value.bridge;\n      this.key = value.key;\n      this.clientId = value.clientId;\n      this.clientMeta = value.clientMeta;\n      this.peerId = value.peerId;\n      this.peerMeta = value.peerMeta;\n      this.handshakeId = value.handshakeId;\n      this.handshakeTopic = value.handshakeTopic;\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, callback) {\n      var eventEmitter = {\n        event: event,\n        callback: callback\n      };\n\n      this._eventManager.subscribe(eventEmitter);\n    }\n  }, {\n    key: \"off\",\n    value: function off(event) {\n      this._eventManager.unsubscribe(event);\n    }\n  }, {\n    key: \"createInstantRequest\",\n    value: function () {\n      var _createInstantRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(instantRequest) {\n        var _this = this;\n\n        var request, endInstantRequest, result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this._generateKey();\n\n              case 2:\n                this._key = _context.sent;\n                request = this._formatRequest({\n                  method: \"wc_instantRequest\",\n                  params: [{\n                    peerId: this.clientId,\n                    peerMeta: this.clientMeta,\n                    request: this._formatRequest(instantRequest)\n                  }]\n                });\n                this.handshakeId = request.id;\n                this.handshakeTopic = uuid();\n\n                this._eventManager.trigger({\n                  event: \"display_uri\",\n                  params: [this.uri]\n                });\n\n                this.on(\"modal_closed\", function () {\n                  throw new Error(ERROR_QRCODE_MODAL_USER_CLOSED);\n                });\n\n                endInstantRequest = function endInstantRequest() {\n                  _this.killSession();\n                };\n\n                _context.prev = 9;\n                _context.next = 12;\n                return this._sendCallRequest(request);\n\n              case 12:\n                result = _context.sent;\n\n                if (result) {\n                  endInstantRequest();\n                }\n\n                return _context.abrupt(\"return\", result);\n\n              case 17:\n                _context.prev = 17;\n                _context.t0 = _context[\"catch\"](9);\n                endInstantRequest();\n                throw _context.t0;\n\n              case 21:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[9, 17]]);\n      }));\n\n      function createInstantRequest(_x) {\n        return _createInstantRequest.apply(this, arguments);\n      }\n\n      return createInstantRequest;\n    }()\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(opts) {\n        var _this2 = this;\n\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (this._qrcodeModal) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                throw new Error(ERROR_QRCODE_MODAL_NOT_PROVIDED);\n\n              case 2:\n                if (!this.connected) {\n                  _context3.next = 4;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", {\n                  chainId: this.chainId,\n                  accounts: this.accounts\n                });\n\n              case 4:\n                _context3.next = 6;\n                return this.createSession(opts);\n\n              case 6:\n                return _context3.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(resolve, reject) {\n                    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            _this2.on(\"modal_closed\", function () {\n                              return reject(new Error(ERROR_QRCODE_MODAL_USER_CLOSED));\n                            });\n\n                            _this2.on(\"connect\", function (error, payload) {\n                              if (error) {\n                                return reject(error);\n                              }\n\n                              resolve(payload.params[0]);\n                            });\n\n                          case 2:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  }));\n\n                  return function (_x3, _x4) {\n                    return _ref.apply(this, arguments);\n                  };\n                }()));\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function connect(_x2) {\n        return _connect.apply(this, arguments);\n      }\n\n      return connect;\n    }()\n  }, {\n    key: \"createSession\",\n    value: function () {\n      var _createSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(opts) {\n        var request;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!this._connected) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                throw new Error(ERROR_SESSION_CONNECTED);\n\n              case 2:\n                if (!this.pending) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 4:\n                _context4.next = 6;\n                return this._generateKey();\n\n              case 6:\n                this._key = _context4.sent;\n                request = this._formatRequest({\n                  method: \"wc_sessionRequest\",\n                  params: [{\n                    peerId: this.clientId,\n                    peerMeta: this.clientMeta,\n                    chainId: opts && opts.chainId ? opts.chainId : null\n                  }]\n                });\n                this.handshakeId = request.id;\n                this.handshakeTopic = uuid();\n\n                this._sendSessionRequest(request, \"Session update rejected\", {\n                  topic: this.handshakeTopic\n                });\n\n                this._eventManager.trigger({\n                  event: \"display_uri\",\n                  params: [this.uri]\n                });\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function createSession(_x5) {\n        return _createSession.apply(this, arguments);\n      }\n\n      return createSession;\n    }()\n  }, {\n    key: \"approveSession\",\n    value: function approveSession(sessionStatus) {\n      if (this._connected) {\n        throw new Error(ERROR_SESSION_CONNECTED);\n      }\n\n      this.chainId = sessionStatus.chainId;\n      this.accounts = sessionStatus.accounts;\n      this.networkId = sessionStatus.networkId || 0;\n      this.rpcUrl = sessionStatus.rpcUrl || \"\";\n      var sessionParams = {\n        approved: true,\n        chainId: this.chainId,\n        networkId: this.networkId,\n        accounts: this.accounts,\n        rpcUrl: this.rpcUrl,\n        peerId: this.clientId,\n        peerMeta: this.clientMeta\n      };\n      var response = {\n        id: this.handshakeId,\n        jsonrpc: \"2.0\",\n        result: sessionParams\n      };\n\n      this._sendResponse(response);\n\n      this._connected = true;\n\n      this._setStorageSession();\n\n      this._eventManager.trigger({\n        event: \"connect\",\n        params: [{\n          peerId: this.peerId,\n          peerMeta: this.peerMeta,\n          chainId: this.chainId,\n          accounts: this.accounts\n        }]\n      });\n    }\n  }, {\n    key: \"rejectSession\",\n    value: function rejectSession(sessionError) {\n      if (this._connected) {\n        throw new Error(ERROR_SESSION_CONNECTED);\n      }\n\n      var message = sessionError && sessionError.message ? sessionError.message : ERROR_SESSION_REJECTED;\n\n      var response = this._formatResponse({\n        id: this.handshakeId,\n        error: {\n          message: message\n        }\n      });\n\n      this._sendResponse(response);\n\n      this._connected = false;\n\n      this._eventManager.trigger({\n        event: \"disconnect\",\n        params: [{\n          message: message\n        }]\n      });\n\n      this._removeStorageSession();\n    }\n  }, {\n    key: \"updateSession\",\n    value: function updateSession(sessionStatus) {\n      if (!this._connected) {\n        throw new Error(ERROR_SESSION_DISCONNECTED);\n      }\n\n      this.chainId = sessionStatus.chainId;\n      this.accounts = sessionStatus.accounts;\n      this.networkId = sessionStatus.networkId || 0;\n      this.rpcUrl = sessionStatus.rpcUrl || \"\";\n      var sessionParams = {\n        approved: true,\n        chainId: this.chainId,\n        networkId: this.networkId,\n        accounts: this.accounts,\n        rpcUrl: this.rpcUrl\n      };\n\n      var request = this._formatRequest({\n        method: \"wc_sessionUpdate\",\n        params: [sessionParams]\n      });\n\n      this._sendSessionRequest(request, \"Session update rejected\");\n\n      this._eventManager.trigger({\n        event: \"session_update\",\n        params: [{\n          chainId: this.chainId,\n          accounts: this.accounts\n        }]\n      });\n\n      this._manageStorageSession();\n    }\n  }, {\n    key: \"killSession\",\n    value: function () {\n      var _killSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(sessionError) {\n        var message, sessionParams, request;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                message = sessionError ? sessionError.message : \"Session Disconnected\";\n                sessionParams = {\n                  approved: false,\n                  chainId: null,\n                  networkId: null,\n                  accounts: null\n                };\n                request = this._formatRequest({\n                  method: \"wc_sessionUpdate\",\n                  params: [sessionParams]\n                });\n                _context5.next = 5;\n                return this._sendRequest(request);\n\n              case 5:\n                this._handleSessionDisconnect(message);\n\n              case 6:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function killSession(_x6) {\n        return _killSession.apply(this, arguments);\n      }\n\n      return killSession;\n    }()\n  }, {\n    key: \"sendTransaction\",\n    value: function () {\n      var _sendTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(tx) {\n        var parsedTx, request, result;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (this._connected) {\n                  _context6.next = 2;\n                  break;\n                }\n\n                throw new Error(ERROR_SESSION_DISCONNECTED);\n\n              case 2:\n                parsedTx = parseTransactionData(tx);\n                request = this._formatRequest({\n                  method: \"eth_sendTransaction\",\n                  params: [parsedTx]\n                });\n                _context6.next = 6;\n                return this._sendCallRequest(request);\n\n              case 6:\n                result = _context6.sent;\n                return _context6.abrupt(\"return\", result);\n\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function sendTransaction(_x7) {\n        return _sendTransaction.apply(this, arguments);\n      }\n\n      return sendTransaction;\n    }()\n  }, {\n    key: \"signTransaction\",\n    value: function () {\n      var _signTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(tx) {\n        var parsedTx, request, result;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (this._connected) {\n                  _context7.next = 2;\n                  break;\n                }\n\n                throw new Error(ERROR_SESSION_DISCONNECTED);\n\n              case 2:\n                parsedTx = parseTransactionData(tx);\n                request = this._formatRequest({\n                  method: \"eth_signTransaction\",\n                  params: [parsedTx]\n                });\n                _context7.next = 6;\n                return this._sendCallRequest(request);\n\n              case 6:\n                result = _context7.sent;\n                return _context7.abrupt(\"return\", result);\n\n              case 8:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function signTransaction(_x8) {\n        return _signTransaction.apply(this, arguments);\n      }\n\n      return signTransaction;\n    }()\n  }, {\n    key: \"signMessage\",\n    value: function () {\n      var _signMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(params) {\n        var request, result;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (this._connected) {\n                  _context8.next = 2;\n                  break;\n                }\n\n                throw new Error(ERROR_SESSION_DISCONNECTED);\n\n              case 2:\n                request = this._formatRequest({\n                  method: \"eth_sign\",\n                  params: params\n                });\n                _context8.next = 5;\n                return this._sendCallRequest(request);\n\n              case 5:\n                result = _context8.sent;\n                return _context8.abrupt(\"return\", result);\n\n              case 7:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function signMessage(_x9) {\n        return _signMessage.apply(this, arguments);\n      }\n\n      return signMessage;\n    }()\n  }, {\n    key: \"signPersonalMessage\",\n    value: function () {\n      var _signPersonalMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(params) {\n        var request, result;\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                if (this._connected) {\n                  _context9.next = 2;\n                  break;\n                }\n\n                throw new Error(ERROR_SESSION_DISCONNECTED);\n\n              case 2:\n                params = parsePersonalSign(params);\n                request = this._formatRequest({\n                  method: \"personal_sign\",\n                  params: params\n                });\n                _context9.next = 6;\n                return this._sendCallRequest(request);\n\n              case 6:\n                result = _context9.sent;\n                return _context9.abrupt(\"return\", result);\n\n              case 8:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function signPersonalMessage(_x10) {\n        return _signPersonalMessage.apply(this, arguments);\n      }\n\n      return signPersonalMessage;\n    }()\n  }, {\n    key: \"signTypedData\",\n    value: function () {\n      var _signTypedData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(params) {\n        var request, result;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                if (this._connected) {\n                  _context10.next = 2;\n                  break;\n                }\n\n                throw new Error(ERROR_SESSION_DISCONNECTED);\n\n              case 2:\n                request = this._formatRequest({\n                  method: \"eth_signTypedData\",\n                  params: params\n                });\n                _context10.next = 5;\n                return this._sendCallRequest(request);\n\n              case 5:\n                result = _context10.sent;\n                return _context10.abrupt(\"return\", result);\n\n              case 7:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function signTypedData(_x11) {\n        return _signTypedData.apply(this, arguments);\n      }\n\n      return signTypedData;\n    }()\n  }, {\n    key: \"updateChain\",\n    value: function () {\n      var _updateChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(chainParams) {\n        var request, result;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                if (this._connected) {\n                  _context11.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Session currently disconnected\");\n\n              case 2:\n                request = this._formatRequest({\n                  method: \"wallet_updateChain\",\n                  params: [chainParams]\n                });\n                _context11.next = 5;\n                return this._sendCallRequest(request);\n\n              case 5:\n                result = _context11.sent;\n                return _context11.abrupt(\"return\", result);\n\n              case 7:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function updateChain(_x12) {\n        return _updateChain.apply(this, arguments);\n      }\n\n      return updateChain;\n    }()\n  }, {\n    key: \"unsafeSend\",\n    value: function unsafeSend(request, options) {\n      var _this3 = this;\n\n      this._sendRequest(request, options);\n\n      this._eventManager.trigger({\n        event: \"call_request_sent\",\n        params: [{\n          request: request,\n          options: options\n        }]\n      });\n\n      return new Promise(function (resolve, reject) {\n        _this3._subscribeToResponse(request.id, function (error, payload) {\n          if (error) {\n            reject(error);\n            return;\n          }\n\n          if (!payload) {\n            throw new Error(ERROR_MISSING_JSON_RPC);\n          }\n\n          resolve(payload);\n        });\n      });\n    }\n  }, {\n    key: \"sendCustomRequest\",\n    value: function () {\n      var _sendCustomRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12(request, options) {\n        var formattedRequest, result;\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                if (this._connected) {\n                  _context12.next = 2;\n                  break;\n                }\n\n                throw new Error(ERROR_SESSION_DISCONNECTED);\n\n              case 2:\n                _context12.t0 = request.method;\n                _context12.next = _context12.t0 === \"eth_accounts\" ? 5 : _context12.t0 === \"eth_chainId\" ? 6 : _context12.t0 === \"eth_sendTransaction\" ? 7 : _context12.t0 === \"eth_signTransaction\" ? 7 : _context12.t0 === \"personal_sign\" ? 9 : 11;\n                break;\n\n              case 5:\n                return _context12.abrupt(\"return\", this.accounts);\n\n              case 6:\n                return _context12.abrupt(\"return\", convertNumberToHex(this.chainId));\n\n              case 7:\n                if (request.params) {\n                  request.params[0] = parseTransactionData(request.params[0]);\n                }\n\n                return _context12.abrupt(\"break\", 12);\n\n              case 9:\n                if (request.params) {\n                  request.params = parsePersonalSign(request.params);\n                }\n\n                return _context12.abrupt(\"break\", 12);\n\n              case 11:\n                return _context12.abrupt(\"break\", 12);\n\n              case 12:\n                formattedRequest = this._formatRequest(request);\n                _context12.next = 15;\n                return this._sendCallRequest(formattedRequest, options);\n\n              case 15:\n                result = _context12.sent;\n                return _context12.abrupt(\"return\", result);\n\n              case 17:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function sendCustomRequest(_x13, _x14) {\n        return _sendCustomRequest.apply(this, arguments);\n      }\n\n      return sendCustomRequest;\n    }()\n  }, {\n    key: \"approveRequest\",\n    value: function approveRequest(response) {\n      if (isJsonRpcResponseSuccess(response)) {\n        var formattedResponse = this._formatResponse(response);\n\n        this._sendResponse(formattedResponse);\n      } else {\n        throw new Error(ERROR_MISSING_RESULT);\n      }\n    }\n  }, {\n    key: \"rejectRequest\",\n    value: function rejectRequest(response) {\n      if (isJsonRpcResponseError(response)) {\n        var formattedResponse = this._formatResponse(response);\n\n        this._sendResponse(formattedResponse);\n      } else {\n        throw new Error(ERROR_MISSING_ERROR);\n      }\n    }\n  }, {\n    key: \"transportClose\",\n    value: function transportClose() {\n      this._transport.close();\n    }\n  }, {\n    key: \"_sendRequest\",\n    value: function () {\n      var _sendRequest2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(request, options) {\n        var callRequest, encryptionPayload, topic, payload, silent;\n        return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                callRequest = this._formatRequest(request);\n                _context13.next = 3;\n                return this._encrypt(callRequest);\n\n              case 3:\n                encryptionPayload = _context13.sent;\n                topic = typeof (options === null || options === void 0 ? void 0 : options.topic) !== \"undefined\" ? options.topic : this.peerId;\n                payload = JSON.stringify(encryptionPayload);\n                silent = typeof (options === null || options === void 0 ? void 0 : options.forcePushNotification) !== \"undefined\" ? !options.forcePushNotification : isSilentPayload(callRequest);\n\n                this._transport.send(payload, topic, silent);\n\n              case 8:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function _sendRequest(_x15, _x16) {\n        return _sendRequest2.apply(this, arguments);\n      }\n\n      return _sendRequest;\n    }()\n  }, {\n    key: \"_sendResponse\",\n    value: function () {\n      var _sendResponse2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14(response) {\n        var encryptionPayload, topic, payload, silent;\n        return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                _context14.next = 2;\n                return this._encrypt(response);\n\n              case 2:\n                encryptionPayload = _context14.sent;\n                topic = this.peerId;\n                payload = JSON.stringify(encryptionPayload);\n                silent = true;\n\n                this._transport.send(payload, topic, silent);\n\n              case 7:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function _sendResponse(_x17) {\n        return _sendResponse2.apply(this, arguments);\n      }\n\n      return _sendResponse;\n    }()\n  }, {\n    key: \"_sendSessionRequest\",\n    value: function () {\n      var _sendSessionRequest2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15(request, errorMsg, options) {\n        return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                this._sendRequest(request, options);\n\n                this._subscribeToSessionResponse(request.id, errorMsg);\n\n              case 2:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this);\n      }));\n\n      function _sendSessionRequest(_x18, _x19, _x20) {\n        return _sendSessionRequest2.apply(this, arguments);\n      }\n\n      return _sendSessionRequest;\n    }()\n  }, {\n    key: \"_sendCallRequest\",\n    value: function _sendCallRequest(request, options) {\n      this._sendRequest(request, options);\n\n      this._eventManager.trigger({\n        event: \"call_request_sent\",\n        params: [{\n          request: request,\n          options: options\n        }]\n      });\n\n      return this._subscribeToCallResponse(request.id);\n    }\n  }, {\n    key: \"_formatRequest\",\n    value: function _formatRequest(request) {\n      if (typeof request.method === \"undefined\") {\n        throw new Error(ERROR_MISSING_METHOD);\n      }\n\n      var formattedRequest = {\n        id: typeof request.id === \"undefined\" ? payloadId() : request.id,\n        jsonrpc: \"2.0\",\n        method: request.method,\n        params: typeof request.params === \"undefined\" ? [] : request.params\n      };\n      return formattedRequest;\n    }\n  }, {\n    key: \"_formatResponse\",\n    value: function _formatResponse(response) {\n      if (typeof response.id === \"undefined\") {\n        throw new Error(ERROR_MISSING_ID);\n      }\n\n      var baseResponse = {\n        id: response.id,\n        jsonrpc: \"2.0\"\n      };\n\n      if (isJsonRpcResponseError(response)) {\n        var error = formatRpcError(response.error);\n        var errorResponse = Object.assign(Object.assign(Object.assign({}, baseResponse), response), {\n          error: error\n        });\n        return errorResponse;\n      } else if (isJsonRpcResponseSuccess(response)) {\n        var successResponse = Object.assign(Object.assign({}, baseResponse), response);\n        return successResponse;\n      }\n\n      throw new Error(ERROR_INVALID_RESPONSE);\n    }\n  }, {\n    key: \"_handleSessionDisconnect\",\n    value: function _handleSessionDisconnect(errorMsg) {\n      var message = errorMsg || \"Session Disconnected\";\n\n      if (!this._connected) {\n        if (this._qrcodeModal) {\n          this._qrcodeModal.close();\n        }\n\n        removeLocal(mobileLinkChoiceKey);\n      }\n\n      if (this._connected) {\n        this._connected = false;\n      }\n\n      if (this._handshakeId) {\n        this._handshakeId = 0;\n      }\n\n      if (this._handshakeTopic) {\n        this._handshakeTopic = \"\";\n      }\n\n      if (this._peerId) {\n        this._peerId = \"\";\n      }\n\n      this._eventManager.trigger({\n        event: \"disconnect\",\n        params: [{\n          message: message\n        }]\n      });\n\n      this._removeStorageSession();\n\n      this.transportClose();\n    }\n  }, {\n    key: \"_handleSessionResponse\",\n    value: function _handleSessionResponse(errorMsg, sessionParams) {\n      if (sessionParams) {\n        if (sessionParams.approved) {\n          if (!this._connected) {\n            this._connected = true;\n\n            if (sessionParams.chainId) {\n              this.chainId = sessionParams.chainId;\n            }\n\n            if (sessionParams.accounts) {\n              this.accounts = sessionParams.accounts;\n            }\n\n            if (sessionParams.peerId && !this.peerId) {\n              this.peerId = sessionParams.peerId;\n            }\n\n            if (sessionParams.peerMeta && !this.peerMeta) {\n              this.peerMeta = sessionParams.peerMeta;\n            }\n\n            this._eventManager.trigger({\n              event: \"connect\",\n              params: [{\n                peerId: this.peerId,\n                peerMeta: this.peerMeta,\n                chainId: this.chainId,\n                accounts: this.accounts\n              }]\n            });\n          } else {\n            if (sessionParams.chainId) {\n              this.chainId = sessionParams.chainId;\n            }\n\n            if (sessionParams.accounts) {\n              this.accounts = sessionParams.accounts;\n            }\n\n            this._eventManager.trigger({\n              event: \"session_update\",\n              params: [{\n                chainId: this.chainId,\n                accounts: this.accounts\n              }]\n            });\n          }\n\n          this._manageStorageSession();\n        } else {\n          this._handleSessionDisconnect(errorMsg);\n        }\n      } else {\n        this._handleSessionDisconnect(errorMsg);\n      }\n    }\n  }, {\n    key: \"_handleIncomingMessages\",\n    value: function () {\n      var _handleIncomingMessages2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee16(socketMessage) {\n        var activeTopics, encryptionPayload, payload;\n        return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                activeTopics = [this.clientId, this.handshakeTopic];\n\n                if (activeTopics.includes(socketMessage.topic)) {\n                  _context16.next = 3;\n                  break;\n                }\n\n                return _context16.abrupt(\"return\");\n\n              case 3:\n                _context16.prev = 3;\n                encryptionPayload = JSON.parse(socketMessage.payload);\n                _context16.next = 10;\n                break;\n\n              case 7:\n                _context16.prev = 7;\n                _context16.t0 = _context16[\"catch\"](3);\n                return _context16.abrupt(\"return\");\n\n              case 10:\n                _context16.next = 12;\n                return this._decrypt(encryptionPayload);\n\n              case 12:\n                payload = _context16.sent;\n\n                if (payload) {\n                  this._eventManager.trigger(payload);\n                }\n\n              case 14:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16, this, [[3, 7]]);\n      }));\n\n      function _handleIncomingMessages(_x21) {\n        return _handleIncomingMessages2.apply(this, arguments);\n      }\n\n      return _handleIncomingMessages;\n    }()\n  }, {\n    key: \"_subscribeToSessionRequest\",\n    value: function _subscribeToSessionRequest() {\n      this._transport.subscribe(this.handshakeTopic);\n    }\n  }, {\n    key: \"_subscribeToResponse\",\n    value: function _subscribeToResponse(id, callback) {\n      this.on(\"response:\".concat(id), callback);\n    }\n  }, {\n    key: \"_subscribeToSessionResponse\",\n    value: function _subscribeToSessionResponse(id, errorMsg) {\n      var _this4 = this;\n\n      this._subscribeToResponse(id, function (error, payload) {\n        if (error) {\n          _this4._handleSessionResponse(error.message);\n\n          return;\n        }\n\n        if (isJsonRpcResponseSuccess(payload)) {\n          _this4._handleSessionResponse(errorMsg, payload.result);\n        } else if (payload.error && payload.error.message) {\n          _this4._handleSessionResponse(payload.error.message);\n        } else {\n          _this4._handleSessionResponse(errorMsg);\n        }\n      });\n    }\n  }, {\n    key: \"_subscribeToCallResponse\",\n    value: function _subscribeToCallResponse(id) {\n      var _this5 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this5._subscribeToResponse(id, function (error, payload) {\n          if (error) {\n            reject(error);\n            return;\n          }\n\n          if (isJsonRpcResponseSuccess(payload)) {\n            resolve(payload.result);\n          } else if (payload.error && payload.error.message) {\n            reject(new Error(payload.error.message));\n          } else {\n            reject(new Error(ERROR_INVALID_RESPONSE));\n          }\n        });\n      });\n    }\n  }, {\n    key: \"_subscribeToInternalEvents\",\n    value: function _subscribeToInternalEvents() {\n      var _this6 = this;\n\n      this.on(\"display_uri\", function () {\n        if (_this6._qrcodeModal) {\n          _this6._qrcodeModal.open(_this6.uri, function () {\n            _this6._eventManager.trigger({\n              event: \"modal_closed\",\n              params: []\n            });\n          }, _this6._qrcodeModalOptions);\n        }\n      });\n      this.on(\"connect\", function () {\n        if (_this6._qrcodeModal) {\n          _this6._qrcodeModal.close();\n        }\n      });\n      this.on(\"call_request_sent\", function (error, payload) {\n        var request = payload.params[0].request;\n\n        if (isMobile() && _this6._signingMethods.includes(request.method)) {\n          var mobileLinkUrl = getLocal(mobileLinkChoiceKey);\n\n          if (mobileLinkUrl) {\n            window.location.href = mobileLinkUrl.href;\n          }\n        }\n      });\n      this.on(\"wc_sessionRequest\", function (error, payload) {\n        if (error) {\n          _this6._eventManager.trigger({\n            event: \"error\",\n            params: [{\n              code: \"SESSION_REQUEST_ERROR\",\n              message: error.toString()\n            }]\n          });\n        }\n\n        _this6.handshakeId = payload.id;\n        _this6.peerId = payload.params[0].peerId;\n        _this6.peerMeta = payload.params[0].peerMeta;\n        var internalPayload = Object.assign(Object.assign({}, payload), {\n          method: \"session_request\"\n        });\n\n        _this6._eventManager.trigger(internalPayload);\n      });\n      this.on(\"wc_sessionUpdate\", function (error, payload) {\n        if (error) {\n          _this6._handleSessionResponse(error.message);\n        }\n\n        _this6._handleSessionResponse(\"Session disconnected\", payload.params[0]);\n      });\n    }\n  }, {\n    key: \"_initTransport\",\n    value: function _initTransport() {\n      var _this7 = this;\n\n      this._transport.on(\"message\", function (socketMessage) {\n        return _this7._handleIncomingMessages(socketMessage);\n      });\n\n      this._transport.on(\"open\", function () {\n        return _this7._eventManager.trigger({\n          event: \"transport_open\",\n          params: []\n        });\n      });\n\n      this._transport.on(\"close\", function () {\n        return _this7._eventManager.trigger({\n          event: \"transport_close\",\n          params: []\n        });\n      });\n\n      this._transport.on(\"error\", function () {\n        return _this7._eventManager.trigger({\n          event: \"transport_error\",\n          params: [\"Websocket connection failed\"]\n        });\n      });\n\n      this._transport.open();\n    }\n  }, {\n    key: \"_formatUri\",\n    value: function _formatUri() {\n      var protocol = this.protocol;\n      var handshakeTopic = this.handshakeTopic;\n      var version = this.version;\n      var bridge = encodeURIComponent(this.bridge);\n      var key = this.key;\n      var uri = \"\".concat(protocol, \":\").concat(handshakeTopic, \"@\").concat(version, \"?bridge=\").concat(bridge, \"&key=\").concat(key);\n      return uri;\n    }\n  }, {\n    key: \"_parseUri\",\n    value: function _parseUri(uri) {\n      var result = parseWalletConnectUri(uri);\n\n      if (result.protocol === this.protocol) {\n        if (!result.handshakeTopic) {\n          throw Error(\"Invalid or missing handshakeTopic parameter value\");\n        }\n\n        var handshakeTopic = result.handshakeTopic;\n\n        if (!result.bridge) {\n          throw Error(\"Invalid or missing bridge url parameter value\");\n        }\n\n        var bridge = decodeURIComponent(result.bridge);\n\n        if (!result.key) {\n          throw Error(\"Invalid or missing key parameter value\");\n        }\n\n        var key = result.key;\n        return {\n          handshakeTopic: handshakeTopic,\n          bridge: bridge,\n          key: key\n        };\n      } else {\n        throw new Error(ERROR_INVALID_URI);\n      }\n    }\n  }, {\n    key: \"_generateKey\",\n    value: function () {\n      var _generateKey2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee17() {\n        var result;\n        return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                if (!this._cryptoLib) {\n                  _context17.next = 5;\n                  break;\n                }\n\n                _context17.next = 3;\n                return this._cryptoLib.generateKey();\n\n              case 3:\n                result = _context17.sent;\n                return _context17.abrupt(\"return\", result);\n\n              case 5:\n                return _context17.abrupt(\"return\", null);\n\n              case 6:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee17, this);\n      }));\n\n      function _generateKey() {\n        return _generateKey2.apply(this, arguments);\n      }\n\n      return _generateKey;\n    }()\n  }, {\n    key: \"_encrypt\",\n    value: function () {\n      var _encrypt2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee18(data) {\n        var key, result;\n        return _regeneratorRuntime().wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                key = this._key;\n\n                if (!(this._cryptoLib && key)) {\n                  _context18.next = 6;\n                  break;\n                }\n\n                _context18.next = 4;\n                return this._cryptoLib.encrypt(data, key);\n\n              case 4:\n                result = _context18.sent;\n                return _context18.abrupt(\"return\", result);\n\n              case 6:\n                return _context18.abrupt(\"return\", null);\n\n              case 7:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee18, this);\n      }));\n\n      function _encrypt(_x22) {\n        return _encrypt2.apply(this, arguments);\n      }\n\n      return _encrypt;\n    }()\n  }, {\n    key: \"_decrypt\",\n    value: function () {\n      var _decrypt2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee19(payload) {\n        var key, result;\n        return _regeneratorRuntime().wrap(function _callee19$(_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                key = this._key;\n\n                if (!(this._cryptoLib && key)) {\n                  _context19.next = 6;\n                  break;\n                }\n\n                _context19.next = 4;\n                return this._cryptoLib.decrypt(payload, key);\n\n              case 4:\n                result = _context19.sent;\n                return _context19.abrupt(\"return\", result);\n\n              case 6:\n                return _context19.abrupt(\"return\", null);\n\n              case 7:\n              case \"end\":\n                return _context19.stop();\n            }\n          }\n        }, _callee19, this);\n      }));\n\n      function _decrypt(_x23) {\n        return _decrypt2.apply(this, arguments);\n      }\n\n      return _decrypt;\n    }()\n  }, {\n    key: \"_getStorageSession\",\n    value: function _getStorageSession() {\n      var result = null;\n\n      if (this._sessionStorage) {\n        result = this._sessionStorage.getSession();\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_setStorageSession\",\n    value: function _setStorageSession() {\n      if (this._sessionStorage) {\n        this._sessionStorage.setSession(this.session);\n      }\n    }\n  }, {\n    key: \"_removeStorageSession\",\n    value: function _removeStorageSession() {\n      if (this._sessionStorage) {\n        this._sessionStorage.removeSession();\n      }\n    }\n  }, {\n    key: \"_manageStorageSession\",\n    value: function _manageStorageSession() {\n      if (this._connected) {\n        this._setStorageSession();\n      } else {\n        this._removeStorageSession();\n      }\n    }\n  }, {\n    key: \"_registerPushServer\",\n    value: function _registerPushServer(pushServerOpts) {\n      if (!pushServerOpts.url || typeof pushServerOpts.url !== \"string\") {\n        throw Error(\"Invalid or missing pushServerOpts.url parameter value\");\n      }\n\n      if (!pushServerOpts.type || typeof pushServerOpts.type !== \"string\") {\n        throw Error(\"Invalid or missing pushServerOpts.type parameter value\");\n      }\n\n      if (!pushServerOpts.token || typeof pushServerOpts.token !== \"string\") {\n        throw Error(\"Invalid or missing pushServerOpts.token parameter value\");\n      }\n\n      var pushSubscription = {\n        bridge: this.bridge,\n        topic: this.clientId,\n        type: pushServerOpts.type,\n        token: pushServerOpts.token,\n        peerName: \"\",\n        language: pushServerOpts.language || \"\"\n      };\n      this.on(\"connect\", /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee20(error, payload) {\n          var peerName, response, json;\n          return _regeneratorRuntime().wrap(function _callee20$(_context20) {\n            while (1) {\n              switch (_context20.prev = _context20.next) {\n                case 0:\n                  if (!error) {\n                    _context20.next = 2;\n                    break;\n                  }\n\n                  throw error;\n\n                case 2:\n                  if (pushServerOpts.peerMeta) {\n                    peerName = payload.params[0].peerMeta.name;\n                    pushSubscription.peerName = peerName;\n                  }\n\n                  _context20.prev = 3;\n                  _context20.next = 6;\n                  return fetch(\"\".concat(pushServerOpts.url, \"/new\"), {\n                    method: \"POST\",\n                    headers: {\n                      Accept: \"application/json\",\n                      \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(pushSubscription)\n                  });\n\n                case 6:\n                  response = _context20.sent;\n                  _context20.next = 9;\n                  return response.json();\n\n                case 9:\n                  json = _context20.sent;\n\n                  if (json.success) {\n                    _context20.next = 12;\n                    break;\n                  }\n\n                  throw Error(\"Failed to register in Push Server\");\n\n                case 12:\n                  _context20.next = 17;\n                  break;\n\n                case 14:\n                  _context20.prev = 14;\n                  _context20.t0 = _context20[\"catch\"](3);\n                  throw Error(\"Failed to register in Push Server\");\n\n                case 17:\n                case \"end\":\n                  return _context20.stop();\n              }\n            }\n          }, _callee20, null, [[3, 14]]);\n        }));\n\n        return function (_x24, _x25) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    }\n  }]);\n\n  return Connector;\n}();\n\nexport default Connector;","map":{"version":3,"mappings":";;;;;+CA+CA,oJ;;AApBA,SACEA,iBADF,EAEEC,oBAFF,EAGEC,uBAHF,EAIEC,uBAJF,EAKEC,aALF,EAMEC,SANF,EAOEC,IAPF,EAQEC,cARF,EASEC,qBATF,EAUEC,kBAVF,EAWEC,wBAXF,EAYEC,sBAZF,EAaEC,eAbF,EAcEC,QAdF,EAeEC,cAfF,EAgBEC,mBAhBF,EAiBEC,QAjBF,EAkBEC,WAlBF,QAmBO,sBAnBP;AAoBA,OAAOC,eAAP,MAA4B,iCAA5B;AACA,SACEC,uBADF,EAEEC,0BAFF,EAGEC,sBAHF,EAIEC,sBAJF,EAKEC,oBALF,EAMEC,mBANF,EAOEC,oBAPF,EAQEC,gBARF,EASEC,sBATF,EAUEC,iBAVF,EAWEC,sBAXF,EAYEC,+BAZF,EAaEC,8BAbF,QAcO,UAdP;AAeA,OAAOC,YAAP,MAAyB,UAAzB;AACA,OAAOC,cAAP,MAA2B,WAA3B;AACA,SAASC,YAAT,QAA6B,OAA7B;;IAIMC,S;EAkDJ,mBAAYC,IAAZ,EAAgC;IAAA;;IAjDhB,gBAAW,IAAX;IACA,eAAU,CAAV;IAIR,eAAU,EAAV;IACA,YAA2B,IAA3B;IAIA,iBAAY,EAAZ;IACA,mBAAkC,IAAlC;IAIA,eAAU,EAAV;IACA,iBAAgC,IAAhC;IAIA,oBAAe,CAAf;IACA,uBAAkB,EAAlB;IAIA,kBAAa,KAAb;IACA,iBAAsB,EAAtB;IACA,gBAAW,CAAX;IACA,kBAAa,CAAb;IACA,eAAU,EAAV;IAMA,qBAA8B,IAAIJ,YAAJ,EAA9B;IAeN,KAAKK,WAAL,GAAmBjC,aAAa,MAAMgC,IAAI,CAACE,aAAL,CAAmBC,UAAtC,IAAoD,IAAvE;IACA,KAAKC,UAAL,GAAkBJ,IAAI,CAACK,SAAvB;IACA,KAAKC,eAAL,GAAuBN,IAAI,CAACO,cAAL,IAAuB,IAAIV,cAAJ,CAAmBG,IAAI,CAACE,aAAL,CAAmBM,SAAtC,CAA9C;IACA,KAAKC,YAAL,GAAoBT,IAAI,CAACE,aAAL,CAAmBQ,WAAvC;IACA,KAAKC,mBAAL,GAA2BX,IAAI,CAACE,aAAL,CAAmBU,kBAA9C;IACA,KAAKC,eAAL,gCAA2BnC,cAA3B,sBAA+CsB,IAAI,CAACE,aAAL,CAAmBxB,cAAnB,IAAqC,EAApF;;IAEA,IAAI,CAACsB,IAAI,CAACE,aAAL,CAAmBY,MAApB,IAA8B,CAACd,IAAI,CAACE,aAAL,CAAmBa,GAAlD,IAAyD,CAACf,IAAI,CAACE,aAAL,CAAmBc,OAAjF,EAA0F;MACxF,MAAM,IAAIC,KAAJ,CAAUxB,sBAAV,CAAN;IACD;;IAED,IAAIO,IAAI,CAACE,aAAL,CAAmBY,MAAvB,EAA+B;MAC7B,KAAKA,MAAL,GAAchB,YAAY,CAACE,IAAI,CAACE,aAAL,CAAmBY,MAApB,CAA1B;IACD;;IAED,IAAId,IAAI,CAACE,aAAL,CAAmBa,GAAvB,EAA4B;MAC1B,KAAKA,GAAL,GAAWf,IAAI,CAACE,aAAL,CAAmBa,GAA9B;IACD;;IAED,IAAMC,OAAO,GAAGhB,IAAI,CAACE,aAAL,CAAmBc,OAAnB,IAA8B,KAAKE,kBAAL,EAA9C;;IAEA,IAAIF,OAAJ,EAAa;MACX,KAAKA,OAAL,GAAeA,OAAf;IACD;;IAED,IAAI,KAAKG,WAAT,EAAsB;MACpB,KAAKC,2BAAL,CAAiC,KAAKD,WAAtC,EAAmD,0BAAnD;IACD;;IAED,KAAKE,UAAL,GACErB,IAAI,CAACsB,SAAL,IACA,IAAIxC,eAAJ,CAAoB;MAClByC,QAAQ,EAAE,KAAKA,QADG;MAElBC,OAAO,EAAE,KAAKA,OAFI;MAGlBC,GAAG,EAAE,KAAKX,MAHQ;MAIlBY,aAAa,EAAE,CAAC,KAAKC,QAAN;IAJG,CAApB,CAFF;;IASA,KAAKC,0BAAL;;IACA,KAAKC,cAAL;;IAEA,IAAI7B,IAAI,CAACE,aAAL,CAAmBa,GAAvB,EAA4B;MAC1B,KAAKe,0BAAL;IACD;;IAED,IAAI9B,IAAI,CAAC+B,cAAT,EAAyB;MACvB,KAAKC,mBAAL,CAAyBhC,IAAI,CAAC+B,cAA9B;IACD;EACF;;;;SAWD,eAAU;MACR,OAAO,KAAKE,OAAZ;IACD,C;SATD,aAAWC,KAAX,EAAwB;MACtB,IAAI,CAACA,KAAL,EAAY;QACV;MACD;;MACD,KAAKD,OAAL,GAAeC,KAAf;IACD;;;SAcD,eAAO;MACL,IAAI,KAAKC,IAAT,EAAe;QACb,IAAMC,GAAG,GAAWtE,uBAAuB,CAAC,KAAKqE,IAAN,EAAY,IAAZ,CAA3C;QACA,OAAOC,GAAP;MACD;;MACD,OAAO,EAAP;IACD,C;SAdD,aAAQF,KAAR,EAAqB;MACnB,IAAI,CAACA,KAAL,EAAY;QACV;MACD;;MACD,IAAME,GAAG,GAAgBrE,uBAAuB,CAACmE,KAAD,CAAhD;MACA,KAAKC,IAAL,GAAYC,GAAZ;IACD;;;SAiBD,eAAY;MACV,IAAIT,QAAQ,GAAkB,KAAKU,SAAnC;;MACA,IAAI,CAACV,QAAL,EAAe;QACbA,QAAQ,GAAG,KAAKU,SAAL,GAAiBnE,IAAI,EAAhC;MACD;;MAED,OAAO,KAAKmE,SAAZ;IACD,C;SAdD,aAAaH,KAAb,EAA0B;MACxB,IAAI,CAACA,KAAL,EAAY;QACV;MACD;;MACD,KAAKG,SAAL,GAAiBH,KAAjB;IACD;;;SAkBD,eAAU;MACR,OAAO,KAAKI,OAAZ;IACD,C;SATD,aAAWJ,KAAX,EAAgB;MACd,IAAI,CAACA,KAAL,EAAY;QACV;MACD;;MACD,KAAKI,OAAL,GAAeJ,KAAf;IACD;;;SAUD,eAAc;MACZ,IAAI/B,UAAU,GAAuB,KAAKF,WAA1C;;MACA,IAAI,CAACE,UAAL,EAAiB;QACfA,UAAU,GAAG,KAAKF,WAAL,GAAmBjC,aAAa,EAA7C;MACD;;MACD,OAAOmC,UAAP;IACD,C;SAVD,aAAe+B,KAAf,EAAoB,CAEnB;;;SAcD,eAAY;MACV,IAAMK,QAAQ,GAAuB,KAAKC,SAA1C;MACA,OAAOD,QAAP;IACD,C;SAPD,aAAaL,KAAb,EAAkB;MAChB,KAAKM,SAAL,GAAiBN,KAAjB;IACD;;;SAcD,eAAkB;MAChB,OAAO,KAAKO,eAAZ;IACD,C;SATD,aAAmBP,KAAnB,EAAwB;MACtB,IAAI,CAACA,KAAL,EAAY;QACV;MACD;;MACD,KAAKO,eAAL,GAAuBP,KAAvB;IACD;;;SAaD,eAAe;MACb,OAAO,KAAKQ,YAAZ;IACD,C;SATD,aAAgBR,KAAhB,EAAqB;MACnB,IAAI,CAACA,KAAL,EAAY;QACV;MACD;;MACD,KAAKQ,YAAL,GAAoBR,KAApB;IACD;;;SAMD,eAAO;MACL,IAAMS,IAAI,GAAG,KAAKC,UAAL,EAAb;;MACA,OAAOD,IAAP;IACD,C;SAED,aAAQT,KAAR,EAAa;MACX,IAAI,CAACA,KAAL,EAAY;QACV;MACD;;MACD,sBAAwC,KAAKW,SAAL,CAAeX,KAAf,CAAxC;MAAA,IAAQY,cAAR,mBAAQA,cAAR;MAAA,IAAwBhC,MAAxB,mBAAwBA,MAAxB;MAAA,IAAgCsB,GAAhC,mBAAgCA,GAAhC;;MACA,KAAKU,cAAL,GAAsBA,cAAtB;MACA,KAAKhC,MAAL,GAAcA,MAAd;MACA,KAAKsB,GAAL,GAAWA,GAAX;IACD;;;SAMD,eAAW;MACT,IAAMW,OAAO,GAAkB,KAAKC,QAApC;MACA,OAAOD,OAAP;IACD,C;SAPD,aAAYb,KAAZ,EAAiB;MACf,KAAKc,QAAL,GAAgBd,KAAhB;IACD;;;SAWD,eAAa;MACX,IAAMe,SAAS,GAAkB,KAAKC,UAAtC;MACA,OAAOD,SAAP;IACD,C;SAPD,aAAcf,KAAd,EAAmB;MACjB,KAAKgB,UAAL,GAAkBhB,KAAlB;IACD;;;SAWD,eAAY;MACV,IAAMiB,QAAQ,GAAoB,KAAKC,SAAvC;MACA,OAAOD,QAAP;IACD,C;SAPD,aAAajB,KAAb,EAAkB;MAChB,KAAKkB,SAAL,GAAiBlB,KAAjB;IACD;;;SAWD,eAAU;MACR,IAAMmB,MAAM,GAAkB,KAAKC,OAAnC;MACA,OAAOD,MAAP;IACD,C;SAPD,aAAWnB,KAAX,EAAgB;MACd,KAAKoB,OAAL,GAAepB,KAAf;IACD;;;SAWD,eAAa;MACX,OAAO,KAAKqB,UAAZ;IACD,C;SAND,aAAcrB,KAAd,EAAmB,CAElB;;;SAUD,eAAW;MACT,OAAO,CAAC,CAAC,KAAKO,eAAd;IACD,C;SAND,aAAYP,KAAZ,EAAiB,CAEhB;;;SAMD,eAAW;MACT,OAAO;QACLsB,SAAS,EAAE,KAAKA,SADX;QAELL,QAAQ,EAAE,KAAKA,QAFV;QAGLJ,OAAO,EAAE,KAAKA,OAHT;QAILjC,MAAM,EAAE,KAAKA,MAJR;QAKLsB,GAAG,EAAE,KAAKA,GALL;QAMLT,QAAQ,EAAE,KAAKA,QANV;QAOLxB,UAAU,EAAE,KAAKA,UAPZ;QAQLsD,MAAM,EAAE,KAAKA,MARR;QASLlB,QAAQ,EAAE,KAAKA,QATV;QAULpB,WAAW,EAAE,KAAKA,WAVb;QAWL2B,cAAc,EAAE,KAAKA;MAXhB,CAAP;IAaD,C;SAED,aAAYZ,KAAZ,EAAiB;MACf,IAAI,CAACA,KAAL,EAAY;QACV;MACD;;MACD,KAAKqB,UAAL,GAAkBrB,KAAK,CAACsB,SAAxB;MACA,KAAKL,QAAL,GAAgBjB,KAAK,CAACiB,QAAtB;MACA,KAAKJ,OAAL,GAAeb,KAAK,CAACa,OAArB;MACA,KAAKjC,MAAL,GAAcoB,KAAK,CAACpB,MAApB;MACA,KAAKsB,GAAL,GAAWF,KAAK,CAACE,GAAjB;MACA,KAAKT,QAAL,GAAgBO,KAAK,CAACP,QAAtB;MACA,KAAKxB,UAAL,GAAkB+B,KAAK,CAAC/B,UAAxB;MACA,KAAKsD,MAAL,GAAcvB,KAAK,CAACuB,MAApB;MACA,KAAKlB,QAAL,GAAgBL,KAAK,CAACK,QAAtB;MACA,KAAKpB,WAAL,GAAmBe,KAAK,CAACf,WAAzB;MACA,KAAK2B,cAAL,GAAsBZ,KAAK,CAACY,cAA5B;IACD;;;WAIM,YAAGY,KAAH,EAAkBC,QAAlB,EAA8E;MACnF,IAAMC,YAAY,GAAG;QACnBF,KAAK,EAALA,KADmB;QAEnBC,QAAQ,EAARA;MAFmB,CAArB;;MAIA,KAAKE,aAAL,CAAmBC,SAAnB,CAA6BF,YAA7B;IACD;;;WAEM,aAAIF,KAAJ,EAAiB;MACtB,KAAKG,aAAL,CAAmBE,WAAnB,CAA+BL,KAA/B;IACD;;;;6FAEM,iBAA2BM,cAA3B;QAAA;;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACa,KAAKC,YAAL,EADb;;cAAA;gBACL,KAAK9B,IADA;gBAGC+B,OAHD,GAG4B,KAAKC,cAAL,CAAoB;kBACnDC,MAAM,EAAE,mBAD2C;kBAEnDC,MAAM,EAAE,CACN;oBACEZ,MAAM,EAAE,KAAK9B,QADf;oBAEEY,QAAQ,EAAE,KAAKpC,UAFjB;oBAGE+D,OAAO,EAAE,KAAKC,cAAL,CAAoBH,cAApB;kBAHX,CADM;gBAF2C,CAApB,CAH5B;gBAcL,KAAK7C,WAAL,GAAmB+C,OAAO,CAACI,EAA3B;gBACA,KAAKxB,cAAL,GAAsB5E,IAAI,EAA1B;;gBAEA,KAAK2F,aAAL,CAAmBU,OAAnB,CAA2B;kBACzBb,KAAK,EAAE,aADkB;kBAEzBW,MAAM,EAAE,CAAC,KAAKtD,GAAN;gBAFiB,CAA3B;;gBAKA,KAAKyD,EAAL,CAAQ,cAAR,EAAwB,YAAK;kBAC3B,MAAM,IAAIvD,KAAJ,CAAUtB,8BAAV,CAAN;gBACD,CAFD;;gBAIM8E,iBA1BD,GA0BqB,SAApBA,iBAAoB,GAAK;kBAC7B,KAAI,CAACC,WAAL;gBACD,CA5BI;;gBAAA;gBAAA;gBAAA,OA+BkB,KAAKC,gBAAL,CAAsBT,OAAtB,CA/BlB;;cAAA;gBA+BGU,MA/BH;;gBAiCH,IAAIA,MAAJ,EAAY;kBACVH,iBAAiB;gBAClB;;gBAnCE,iCAqCIG,MArCJ;;cAAA;gBAAA;gBAAA;gBAuCHH,iBAAiB;gBAvCd;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;gFA4CA,kBAAczE,IAAd;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA,KAAKS,YADL;kBAAA;kBAAA;gBAAA;;gBAAA,MAEG,IAAIQ,KAAJ,CAAUvB,+BAAV,CAFH;;cAAA;gBAAA,KAKD,KAAK8D,SALJ;kBAAA;kBAAA;gBAAA;;gBAAA,kCAMI;kBACLT,OAAO,EAAE,KAAKA,OADT;kBAELI,QAAQ,EAAE,KAAKA;gBAFV,CANJ;;cAAA;gBAAA;gBAAA,OAYC,KAAK0B,aAAL,CAAmB7E,IAAnB,CAZD;;cAAA;gBAAA,kCAcE,IAAI8E,OAAJ;kBAAA,sEAA4B,kBAAOC,OAAP,EAAgBC,MAAhB;oBAAA;sBAAA;wBAAA;0BAAA;4BACjC,MAAI,CAACR,EAAL,CAAQ,cAAR,EAAwB;8BAAA,OAAMQ,MAAM,CAAC,IAAI/D,KAAJ,CAAUtB,8BAAV,CAAD,CAAZ;4BAAA,CAAxB;;4BAEA,MAAI,CAAC6E,EAAL,CAAQ,SAAR,EAAmB,UAACS,KAAD,EAAQC,OAAR,EAAmB;8BACpC,IAAID,KAAJ,EAAW;gCACT,OAAOD,MAAM,CAACC,KAAD,CAAb;8BACD;;8BAEDF,OAAO,CAACG,OAAO,CAACb,MAAR,CAAe,CAAf,CAAD,CAAP;4BACD,CAND;;0BAHiC;0BAAA;4BAAA;wBAAA;sBAAA;oBAAA;kBAAA,CAA5B;;kBAAA;oBAAA;kBAAA;gBAAA,IAdF;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;sFA2BA,kBAAoBrE,IAApB;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACD,KAAKuD,UADJ;kBAAA;kBAAA;gBAAA;;gBAAA,MAEG,IAAItC,KAAJ,CAAUlC,uBAAV,CAFH;;cAAA;gBAAA,KAKD,KAAKoG,OALJ;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAAA;gBAAA,OASa,KAAKlB,YAAL,EATb;;cAAA;gBASL,KAAK9B,IATA;gBAWC+B,OAXD,GAW4B,KAAKC,cAAL,CAAoB;kBACnDC,MAAM,EAAE,mBAD2C;kBAEnDC,MAAM,EAAE,CACN;oBACEZ,MAAM,EAAE,KAAK9B,QADf;oBAEEY,QAAQ,EAAE,KAAKpC,UAFjB;oBAGE4C,OAAO,EAAE/C,IAAI,IAAIA,IAAI,CAAC+C,OAAb,GAAuB/C,IAAI,CAAC+C,OAA5B,GAAsC;kBAHjD,CADM;gBAF2C,CAApB,CAX5B;gBAsBL,KAAK5B,WAAL,GAAmB+C,OAAO,CAACI,EAA3B;gBACA,KAAKxB,cAAL,GAAsB5E,IAAI,EAA1B;;gBAEA,KAAKkH,mBAAL,CAAyBlB,OAAzB,EAAkC,yBAAlC,EAA6D;kBAC3DmB,KAAK,EAAE,KAAKvC;gBAD+C,CAA7D;;gBAIA,KAAKe,aAAL,CAAmBU,OAAnB,CAA2B;kBACzBb,KAAK,EAAE,aADkB;kBAEzBW,MAAM,EAAE,CAAC,KAAKtD,GAAN;gBAFiB,CAA3B;;cA7BK;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;WAmCA,wBAAeuE,aAAf,EAA4C;MACjD,IAAI,KAAK/B,UAAT,EAAqB;QACnB,MAAM,IAAItC,KAAJ,CAAUlC,uBAAV,CAAN;MACD;;MAED,KAAKgE,OAAL,GAAeuC,aAAa,CAACvC,OAA7B;MACA,KAAKI,QAAL,GAAgBmC,aAAa,CAACnC,QAA9B;MACA,KAAKF,SAAL,GAAiBqC,aAAa,CAACrC,SAAd,IAA2B,CAA5C;MACA,KAAKI,MAAL,GAAciC,aAAa,CAACjC,MAAd,IAAwB,EAAtC;MAEA,IAAMkC,aAAa,GAAmB;QACpCC,QAAQ,EAAE,IAD0B;QAEpCzC,OAAO,EAAE,KAAKA,OAFsB;QAGpCE,SAAS,EAAE,KAAKA,SAHoB;QAIpCE,QAAQ,EAAE,KAAKA,QAJqB;QAKpCE,MAAM,EAAE,KAAKA,MALuB;QAMpCI,MAAM,EAAE,KAAK9B,QANuB;QAOpCY,QAAQ,EAAE,KAAKpC;MAPqB,CAAtC;MAUA,IAAMsF,QAAQ,GAAG;QACfnB,EAAE,EAAE,KAAKnD,WADM;QAEfuE,OAAO,EAAE,KAFM;QAGfd,MAAM,EAAEW;MAHO,CAAjB;;MAMA,KAAKI,aAAL,CAAmBF,QAAnB;;MAEA,KAAKlC,UAAL,GAAkB,IAAlB;;MACA,KAAKqC,kBAAL;;MACA,KAAK/B,aAAL,CAAmBU,OAAnB,CAA2B;QACzBb,KAAK,EAAE,SADkB;QAEzBW,MAAM,EAAE,CACN;UACEZ,MAAM,EAAE,KAAKA,MADf;UAEElB,QAAQ,EAAE,KAAKA,QAFjB;UAGEQ,OAAO,EAAE,KAAKA,OAHhB;UAIEI,QAAQ,EAAE,KAAKA;QAJjB,CADM;MAFiB,CAA3B;IAWD;;;WAEM,uBAAc0C,YAAd,EAA0C;MAC/C,IAAI,KAAKtC,UAAT,EAAqB;QACnB,MAAM,IAAItC,KAAJ,CAAUlC,uBAAV,CAAN;MACD;;MAED,IAAM+G,OAAO,GACXD,YAAY,IAAIA,YAAY,CAACC,OAA7B,GAAuCD,YAAY,CAACC,OAApD,GAA8D7G,sBADhE;;MAGA,IAAMwG,QAAQ,GAAG,KAAKM,eAAL,CAAqB;QACpCzB,EAAE,EAAE,KAAKnD,WAD2B;QAEpC8D,KAAK,EAAE;UAAEa,OAAO,EAAPA;QAAF;MAF6B,CAArB,CAAjB;;MAKA,KAAKH,aAAL,CAAmBF,QAAnB;;MAEA,KAAKlC,UAAL,GAAkB,KAAlB;;MACA,KAAKM,aAAL,CAAmBU,OAAnB,CAA2B;QACzBb,KAAK,EAAE,YADkB;QAEzBW,MAAM,EAAE,CAAC;UAAEyB,OAAO,EAAPA;QAAF,CAAD;MAFiB,CAA3B;;MAIA,KAAKE,qBAAL;IACD;;;WAEM,uBAAcV,aAAd,EAA2C;MAChD,IAAI,CAAC,KAAK/B,UAAV,EAAsB;QACpB,MAAM,IAAItC,KAAJ,CAAUjC,0BAAV,CAAN;MACD;;MAED,KAAK+D,OAAL,GAAeuC,aAAa,CAACvC,OAA7B;MACA,KAAKI,QAAL,GAAgBmC,aAAa,CAACnC,QAA9B;MACA,KAAKF,SAAL,GAAiBqC,aAAa,CAACrC,SAAd,IAA2B,CAA5C;MACA,KAAKI,MAAL,GAAciC,aAAa,CAACjC,MAAd,IAAwB,EAAtC;MAEA,IAAMkC,aAAa,GAAmB;QACpCC,QAAQ,EAAE,IAD0B;QAEpCzC,OAAO,EAAE,KAAKA,OAFsB;QAGpCE,SAAS,EAAE,KAAKA,SAHoB;QAIpCE,QAAQ,EAAE,KAAKA,QAJqB;QAKpCE,MAAM,EAAE,KAAKA;MALuB,CAAtC;;MAQA,IAAMa,OAAO,GAAG,KAAKC,cAAL,CAAoB;QAClCC,MAAM,EAAE,kBAD0B;QAElCC,MAAM,EAAE,CAACkB,aAAD;MAF0B,CAApB,CAAhB;;MAKA,KAAKH,mBAAL,CAAyBlB,OAAzB,EAAkC,yBAAlC;;MAEA,KAAKL,aAAL,CAAmBU,OAAnB,CAA2B;QACzBb,KAAK,EAAE,gBADkB;QAEzBW,MAAM,EAAE,CACN;UACEtB,OAAO,EAAE,KAAKA,OADhB;UAEEI,QAAQ,EAAE,KAAKA;QAFjB,CADM;MAFiB,CAA3B;;MAUA,KAAK8C,qBAAL;IACD;;;;oFAEM,kBAAkBJ,YAAlB;QAAA;QAAA;UAAA;YAAA;cAAA;gBACCC,OADD,GACWD,YAAY,GAAGA,YAAY,CAACC,OAAhB,GAA0B,sBADjD;gBAGCP,aAHD,GAGiC;kBACpCC,QAAQ,EAAE,KAD0B;kBAEpCzC,OAAO,EAAE,IAF2B;kBAGpCE,SAAS,EAAE,IAHyB;kBAIpCE,QAAQ,EAAE;gBAJ0B,CAHjC;gBAUCe,OAVD,GAUW,KAAKC,cAAL,CAAoB;kBAClCC,MAAM,EAAE,kBAD0B;kBAElCC,MAAM,EAAE,CAACkB,aAAD;gBAF0B,CAApB,CAVX;gBAAA;gBAAA,OAeC,KAAKW,YAAL,CAAkBhC,OAAlB,CAfD;;cAAA;gBAiBL,KAAKiC,wBAAL,CAA8BL,OAA9B;;cAjBK;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;wFAoBA,kBAAsBM,EAAtB;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA,KAAK7C,UADL;kBAAA;kBAAA;gBAAA;;gBAAA,MAEG,IAAItC,KAAJ,CAAUjC,0BAAV,CAFH;;cAAA;gBAKCqH,QALD,GAKYxI,oBAAoB,CAACuI,EAAD,CALhC;gBAOClC,OAPD,GAOW,KAAKC,cAAL,CAAoB;kBAClCC,MAAM,EAAE,qBAD0B;kBAElCC,MAAM,EAAE,CAACgC,QAAD;gBAF0B,CAApB,CAPX;gBAAA;gBAAA,OAYgB,KAAK1B,gBAAL,CAAsBT,OAAtB,CAZhB;;cAAA;gBAYCU,MAZD;gBAAA,kCAaEA,MAbF;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;wFAgBA,kBAAsBwB,EAAtB;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA,KAAK7C,UADL;kBAAA;kBAAA;gBAAA;;gBAAA,MAEG,IAAItC,KAAJ,CAAUjC,0BAAV,CAFH;;cAAA;gBAKCqH,QALD,GAKYxI,oBAAoB,CAACuI,EAAD,CALhC;gBAOClC,OAPD,GAOW,KAAKC,cAAL,CAAoB;kBAClCC,MAAM,EAAE,qBAD0B;kBAElCC,MAAM,EAAE,CAACgC,QAAD;gBAF0B,CAApB,CAPX;gBAAA;gBAAA,OAYgB,KAAK1B,gBAAL,CAAsBT,OAAtB,CAZhB;;cAAA;gBAYCU,MAZD;gBAAA,kCAaEA,MAbF;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;oFAgBA,kBAAkBP,MAAlB;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA,KAAKd,UADL;kBAAA;kBAAA;gBAAA;;gBAAA,MAEG,IAAItC,KAAJ,CAAUjC,0BAAV,CAFH;;cAAA;gBAKCkF,OALD,GAKW,KAAKC,cAAL,CAAoB;kBAClCC,MAAM,EAAE,UAD0B;kBAElCC,MAAM,EAANA;gBAFkC,CAApB,CALX;gBAAA;gBAAA,OAUgB,KAAKM,gBAAL,CAAsBT,OAAtB,CAVhB;;cAAA;gBAUCU,MAVD;gBAAA,kCAWEA,MAXF;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;4FAcA,kBAA0BP,MAA1B;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA,KAAKd,UADL;kBAAA;kBAAA;gBAAA;;gBAAA,MAEG,IAAItC,KAAJ,CAAUjC,0BAAV,CAFH;;cAAA;gBAKLqF,MAAM,GAAGzG,iBAAiB,CAACyG,MAAD,CAA1B;gBAEMH,OAPD,GAOW,KAAKC,cAAL,CAAoB;kBAClCC,MAAM,EAAE,eAD0B;kBAElCC,MAAM,EAANA;gBAFkC,CAApB,CAPX;gBAAA;gBAAA,OAYgB,KAAKM,gBAAL,CAAsBT,OAAtB,CAZhB;;cAAA;gBAYCU,MAZD;gBAAA,kCAaEA,MAbF;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;sFAgBA,mBAAoBP,MAApB;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA,KAAKd,UADL;kBAAA;kBAAA;gBAAA;;gBAAA,MAEG,IAAItC,KAAJ,CAAUjC,0BAAV,CAFH;;cAAA;gBAKCkF,OALD,GAKW,KAAKC,cAAL,CAAoB;kBAClCC,MAAM,EAAE,mBAD0B;kBAElCC,MAAM,EAANA;gBAFkC,CAApB,CALX;gBAAA;gBAAA,OAUgB,KAAKM,gBAAL,CAAsBT,OAAtB,CAVhB;;cAAA;gBAUCU,MAVD;gBAAA,mCAWEA,MAXF;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;oFAcA,mBAAkB0B,WAAlB;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA,KAAK/C,UADL;kBAAA;kBAAA;gBAAA;;gBAAA,MAEG,IAAItC,KAAJ,CAAU,gCAAV,CAFH;;cAAA;gBAKCiD,OALD,GAKW,KAAKC,cAAL,CAAoB;kBAClCC,MAAM,EAAE,oBAD0B;kBAElCC,MAAM,EAAE,CAACiC,WAAD;gBAF0B,CAApB,CALX;gBAAA;gBAAA,OAUgB,KAAK3B,gBAAL,CAAsBT,OAAtB,CAVhB;;cAAA;gBAUCU,MAVD;gBAAA,mCAWEA,MAXF;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;WAcA,oBACLV,OADK,EAELqC,OAFK,EAEoB;MAAA;;MAEzB,KAAKL,YAAL,CAAkBhC,OAAlB,EAA2BqC,OAA3B;;MAEA,KAAK1C,aAAL,CAAmBU,OAAnB,CAA2B;QACzBb,KAAK,EAAE,mBADkB;QAEzBW,MAAM,EAAE,CAAC;UAAEH,OAAO,EAAPA,OAAF;UAAWqC,OAAO,EAAPA;QAAX,CAAD;MAFiB,CAA3B;;MAKA,OAAO,IAAIzB,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAoB;QACrC,MAAI,CAACwB,oBAAL,CAA0BtC,OAAO,CAACI,EAAlC,EAAsC,UAACW,KAAD,EAAsBC,OAAtB,EAA6C;UACjF,IAAID,KAAJ,EAAW;YACTD,MAAM,CAACC,KAAD,CAAN;YACA;UACD;;UACD,IAAI,CAACC,OAAL,EAAc;YACZ,MAAM,IAAIjE,KAAJ,CAAU/B,sBAAV,CAAN;UACD;;UACD6F,OAAO,CAACG,OAAD,CAAP;QACD,CATD;MAUD,CAXM,CAAP;IAYD;;;;0FAEM,mBAAwBhB,OAAxB,EAA2DqC,OAA3D;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA,KAAKhD,UADL;kBAAA;kBAAA;gBAAA;;gBAAA,MAEG,IAAItC,KAAJ,CAAUjC,0BAAV,CAFH;;cAAA;gBAAA,gBAKGkF,OAAO,CAACE,MALX;gBAAA,oCAME,cANF,yBAQE,aARF,yBAUE,qBAVF,yBAWE,qBAXF,yBAgBE,eAhBF;gBAAA;;cAAA;gBAAA,mCAOM,KAAKjB,QAPX;;cAAA;gBAAA,mCASM9E,kBAAkB,CAAC,KAAK0E,OAAN,CATxB;;cAAA;gBAYD,IAAImB,OAAO,CAACG,MAAZ,EAAoB;kBAClBH,OAAO,CAACG,MAAR,CAAe,CAAf,IAAoBxG,oBAAoB,CAACqG,OAAO,CAACG,MAAR,CAAe,CAAf,CAAD,CAAxC;gBACD;;gBAdA;;cAAA;gBAiBD,IAAIH,OAAO,CAACG,MAAZ,EAAoB;kBAClBH,OAAO,CAACG,MAAR,GAAiBzG,iBAAiB,CAACsG,OAAO,CAACG,MAAT,CAAlC;gBACD;;gBAnBA;;cAAA;gBAAA;;cAAA;gBAyBCoC,gBAzBD,GAyBoB,KAAKtC,cAAL,CAAoBD,OAApB,CAzBpB;gBAAA;gBAAA,OA2BgB,KAAKS,gBAAL,CAAsB8B,gBAAtB,EAAwCF,OAAxC,CA3BhB;;cAAA;gBA2BC3B,MA3BD;gBAAA,mCA4BEA,MA5BF;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;WA+BA,wBAAea,QAAf,EAAyD;MAC9D,IAAInH,wBAAwB,CAACmH,QAAD,CAA5B,EAAwC;QACtC,IAAMiB,iBAAiB,GAAG,KAAKX,eAAL,CAAqBN,QAArB,CAA1B;;QACA,KAAKE,aAAL,CAAmBe,iBAAnB;MACD,CAHD,MAGO;QACL,MAAM,IAAIzF,KAAJ,CAAU9B,oBAAV,CAAN;MACD;IACF;;;WAEM,uBAAcsG,QAAd,EAAsD;MAC3D,IAAIlH,sBAAsB,CAACkH,QAAD,CAA1B,EAAsC;QACpC,IAAMiB,iBAAiB,GAAG,KAAKX,eAAL,CAAqBN,QAArB,CAA1B;;QACA,KAAKE,aAAL,CAAmBe,iBAAnB;MACD,CAHD,MAGO;QACL,MAAM,IAAIzF,KAAJ,CAAU7B,mBAAV,CAAN;MACD;IACF;;;WAEM,0BAAc;MACnB,KAAKiC,UAAL,CAAgBsF,KAAhB;IACD;;;;qFAIS,mBACRzC,OADQ,EAERqC,OAFQ;QAAA;QAAA;UAAA;YAAA;cAAA;gBAIFK,WAJE,GAI6B,KAAKzC,cAAL,CAAoBD,OAApB,CAJ7B;gBAAA;gBAAA,OAMmD,KAAK2C,QAAL,CAAcD,WAAd,CANnD;;cAAA;gBAMFE,iBANE;gBAQFzB,KARE,GAQc,QAAOkB,OAAO,SAAP,WAAO,WAAP,GAAO,MAAP,UAAO,CAAElB,KAAhB,MAA0B,WAA1B,GAAwCkB,OAAO,CAAClB,KAAhD,GAAwD,KAAK5B,MAR3E;gBASFyB,OATE,GASgB6B,IAAI,CAACC,SAAL,CAAeF,iBAAf,CAThB;gBAUFG,MAVE,GAWN,QAAOV,OAAO,SAAP,WAAO,WAAP,GAAO,MAAP,UAAO,CAAEW,qBAAhB,MAA0C,WAA1C,GACI,CAACX,OAAO,CAACW,qBADb,GAEI1I,eAAe,CAACoI,WAAD,CAbb;;gBAeR,KAAKvF,UAAL,CAAgB8F,IAAhB,CAAqBjC,OAArB,EAA8BG,KAA9B,EAAqC4B,MAArC;;cAfQ;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;sFAkBA,mBAAoBxB,QAApB;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACmD,KAAKoB,QAAL,CAAcpB,QAAd,CADnD;;cAAA;gBACFqB,iBADE;gBAGFzB,KAHE,GAGc,KAAK5B,MAHnB;gBAIFyB,OAJE,GAIgB6B,IAAI,CAACC,SAAL,CAAeF,iBAAf,CAJhB;gBAKFG,MALE,GAKO,IALP;;gBAOR,KAAK5F,UAAL,CAAgB8F,IAAhB,CAAqBjC,OAArB,EAA8BG,KAA9B,EAAqC4B,MAArC;;cAPQ;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;4FAUA,mBACR/C,OADQ,EAERkD,QAFQ,EAGRb,OAHQ;QAAA;UAAA;YAAA;cAAA;gBAKR,KAAKL,YAAL,CAAkBhC,OAAlB,EAA2BqC,OAA3B;;gBACA,KAAKnF,2BAAL,CAAiC8C,OAAO,CAACI,EAAzC,EAA6C8C,QAA7C;;cANQ;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;WASA,0BAAiBlD,OAAjB,EAA2CqC,OAA3C,EAAoE;MAC5E,KAAKL,YAAL,CAAkBhC,OAAlB,EAA2BqC,OAA3B;;MAEA,KAAK1C,aAAL,CAAmBU,OAAnB,CAA2B;QACzBb,KAAK,EAAE,mBADkB;QAEzBW,MAAM,EAAE,CAAC;UAAEH,OAAO,EAAPA,OAAF;UAAWqC,OAAO,EAAPA;QAAX,CAAD;MAFiB,CAA3B;;MAKA,OAAO,KAAKc,wBAAL,CAA8BnD,OAAO,CAACI,EAAtC,CAAP;IACD;;;WAES,wBAAeJ,OAAf,EAAgD;MACxD,IAAI,OAAOA,OAAO,CAACE,MAAf,KAA0B,WAA9B,EAA2C;QACzC,MAAM,IAAInD,KAAJ,CAAU5B,oBAAV,CAAN;MACD;;MACD,IAAMoH,gBAAgB,GAAoB;QACxCnC,EAAE,EAAE,OAAOJ,OAAO,CAACI,EAAf,KAAsB,WAAtB,GAAoCrG,SAAS,EAA7C,GAAkDiG,OAAO,CAACI,EADtB;QAExCoB,OAAO,EAAE,KAF+B;QAGxCtB,MAAM,EAAEF,OAAO,CAACE,MAHwB;QAIxCC,MAAM,EAAE,OAAOH,OAAO,CAACG,MAAf,KAA0B,WAA1B,GAAwC,EAAxC,GAA6CH,OAAO,CAACG;MAJrB,CAA1C;MAMA,OAAOoC,gBAAP;IACD;;;WAES,yBACRhB,QADQ,EAC0D;MAElE,IAAI,OAAOA,QAAQ,CAACnB,EAAhB,KAAuB,WAA3B,EAAwC;QACtC,MAAM,IAAIrD,KAAJ,CAAU3B,gBAAV,CAAN;MACD;;MAED,IAAMgI,YAAY,GAAG;QAAEhD,EAAE,EAAEmB,QAAQ,CAACnB,EAAf;QAAmBoB,OAAO,EAAE;MAA5B,CAArB;;MAEA,IAAInH,sBAAsB,CAACkH,QAAD,CAA1B,EAAsC;QACpC,IAAMR,KAAK,GAAG9G,cAAc,CAACsH,QAAQ,CAACR,KAAV,CAA5B;QAEA,IAAMsC,aAAa,iDACdD,YADc,GAEd7B,QAFc,GAEN;UACXR,KAAK,EAALA;QADW,CAFM,CAAnB;QAKA,OAAOsC,aAAP;MACD,CATD,MASO,IAAIjJ,wBAAwB,CAACmH,QAAD,CAA5B,EAAwC;QAC7C,IAAM+B,eAAe,mCAChBF,YADgB,GAEhB7B,QAFgB,CAArB;QAKA,OAAO+B,eAAP;MACD;;MAED,MAAM,IAAIvG,KAAJ,CAAU1B,sBAAV,CAAN;IACD;;;WAEO,kCAAyB6H,QAAzB,EAA0C;MAChD,IAAMtB,OAAO,GAAGsB,QAAQ,IAAI,sBAA5B;;MACA,IAAI,CAAC,KAAK7D,UAAV,EAAsB;QACpB,IAAI,KAAK9C,YAAT,EAAuB;UACrB,KAAKA,YAAL,CAAkBkG,KAAlB;QACD;;QACD9H,WAAW,CAACF,mBAAD,CAAX;MACD;;MACD,IAAI,KAAK4E,UAAT,EAAqB;QACnB,KAAKA,UAAL,GAAkB,KAAlB;MACD;;MACD,IAAI,KAAKb,YAAT,EAAuB;QACrB,KAAKA,YAAL,GAAoB,CAApB;MACD;;MACD,IAAI,KAAKD,eAAT,EAA0B;QACxB,KAAKA,eAAL,GAAuB,EAAvB;MACD;;MACD,IAAI,KAAKH,OAAT,EAAkB;QAChB,KAAKA,OAAL,GAAe,EAAf;MACD;;MACD,KAAKuB,aAAL,CAAmBU,OAAnB,CAA2B;QACzBb,KAAK,EAAE,YADkB;QAEzBW,MAAM,EAAE,CAAC;UAAEyB,OAAO,EAAPA;QAAF,CAAD;MAFiB,CAA3B;;MAIA,KAAKE,qBAAL;;MACA,KAAKyB,cAAL;IACD;;;WAEO,gCAAuBL,QAAvB,EAAyC7B,aAAzC,EAAuE;MAC7E,IAAIA,aAAJ,EAAmB;QACjB,IAAIA,aAAa,CAACC,QAAlB,EAA4B;UAC1B,IAAI,CAAC,KAAKjC,UAAV,EAAsB;YACpB,KAAKA,UAAL,GAAkB,IAAlB;;YAEA,IAAIgC,aAAa,CAACxC,OAAlB,EAA2B;cACzB,KAAKA,OAAL,GAAewC,aAAa,CAACxC,OAA7B;YACD;;YAED,IAAIwC,aAAa,CAACpC,QAAlB,EAA4B;cAC1B,KAAKA,QAAL,GAAgBoC,aAAa,CAACpC,QAA9B;YACD;;YAED,IAAIoC,aAAa,CAAC9B,MAAd,IAAwB,CAAC,KAAKA,MAAlC,EAA0C;cACxC,KAAKA,MAAL,GAAc8B,aAAa,CAAC9B,MAA5B;YACD;;YAED,IAAI8B,aAAa,CAAChD,QAAd,IAA0B,CAAC,KAAKA,QAApC,EAA8C;cAC5C,KAAKA,QAAL,GAAgBgD,aAAa,CAAChD,QAA9B;YACD;;YAED,KAAKsB,aAAL,CAAmBU,OAAnB,CAA2B;cACzBb,KAAK,EAAE,SADkB;cAEzBW,MAAM,EAAE,CACN;gBACEZ,MAAM,EAAE,KAAKA,MADf;gBAEElB,QAAQ,EAAE,KAAKA,QAFjB;gBAGEQ,OAAO,EAAE,KAAKA,OAHhB;gBAIEI,QAAQ,EAAE,KAAKA;cAJjB,CADM;YAFiB,CAA3B;UAWD,CA9BD,MA8BO;YACL,IAAIoC,aAAa,CAACxC,OAAlB,EAA2B;cACzB,KAAKA,OAAL,GAAewC,aAAa,CAACxC,OAA7B;YACD;;YACD,IAAIwC,aAAa,CAACpC,QAAlB,EAA4B;cAC1B,KAAKA,QAAL,GAAgBoC,aAAa,CAACpC,QAA9B;YACD;;YAED,KAAKU,aAAL,CAAmBU,OAAnB,CAA2B;cACzBb,KAAK,EAAE,gBADkB;cAEzBW,MAAM,EAAE,CACN;gBACEtB,OAAO,EAAE,KAAKA,OADhB;gBAEEI,QAAQ,EAAE,KAAKA;cAFjB,CADM;YAFiB,CAA3B;UASD;;UAED,KAAK8C,qBAAL;QACD,CAnDD,MAmDO;UACL,KAAKE,wBAAL,CAA8BiB,QAA9B;QACD;MACF,CAvDD,MAuDO;QACL,KAAKjB,wBAAL,CAA8BiB,QAA9B;MACD;IACF;;;;gGAEO,mBAA8BM,aAA9B;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC,YADA,GACe,CAAC,KAAKhG,QAAN,EAAgB,KAAKmB,cAArB,CADf;;gBAAA,IAGD6E,YAAY,CAACC,QAAb,CAAsBF,aAAa,CAACrC,KAApC,CAHC;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAAA;gBASJyB,iBAAiB,GAAGC,IAAI,CAACc,KAAL,CAAWH,aAAa,CAACxC,OAAzB,CAApB;gBATI;gBAAA;;cAAA;gBAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA,OAkBW,KAAK4C,QAAL,CAAchB,iBAAd,CAlBX;;cAAA;gBAcA5B,OAdA;;gBAoBN,IAAIA,OAAJ,EAAa;kBACX,KAAKrB,aAAL,CAAmBU,OAAnB,CAA2BW,OAA3B;gBACD;;cAtBK;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;WAyBA,sCAA0B;MAChC,KAAK7D,UAAL,CAAgByC,SAAhB,CAA0B,KAAKhB,cAA/B;IACD;;;WAEO,8BACNwB,EADM,EAENX,QAFM,EAEsD;MAE5D,KAAKa,EAAL,oBAAoBF,EAApB,GAA0BX,QAA1B;IACD;;;WAEO,qCAA4BW,EAA5B,EAAwC8C,QAAxC,EAAwD;MAAA;;MAC9D,KAAKZ,oBAAL,CAA0BlC,EAA1B,EAA8B,UAACW,KAAD,EAAQC,OAAR,EAAmB;QAC/C,IAAID,KAAJ,EAAW;UACT,MAAI,CAAC8C,sBAAL,CAA4B9C,KAAK,CAACa,OAAlC;;UACA;QACD;;QACD,IAAIxH,wBAAwB,CAAC4G,OAAD,CAA5B,EAAuC;UACrC,MAAI,CAAC6C,sBAAL,CAA4BX,QAA5B,EAAsClC,OAAO,CAACN,MAA9C;QACD,CAFD,MAEO,IAAIM,OAAO,CAACD,KAAR,IAAiBC,OAAO,CAACD,KAAR,CAAca,OAAnC,EAA4C;UACjD,MAAI,CAACiC,sBAAL,CAA4B7C,OAAO,CAACD,KAAR,CAAca,OAA1C;QACD,CAFM,MAEA;UACL,MAAI,CAACiC,sBAAL,CAA4BX,QAA5B;QACD;MACF,CAZD;IAaD;;;WAEO,kCAAyB9C,EAAzB,EAAmC;MAAA;;MACzC,OAAO,IAAIQ,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAoB;QACrC,MAAI,CAACwB,oBAAL,CAA0BlC,EAA1B,EAA8B,UAACW,KAAD,EAAQC,OAAR,EAAmB;UAC/C,IAAID,KAAJ,EAAW;YACTD,MAAM,CAACC,KAAD,CAAN;YACA;UACD;;UACD,IAAI3G,wBAAwB,CAAC4G,OAAD,CAA5B,EAAuC;YACrCH,OAAO,CAACG,OAAO,CAACN,MAAT,CAAP;UACD,CAFD,MAEO,IAAIM,OAAO,CAACD,KAAR,IAAiBC,OAAO,CAACD,KAAR,CAAca,OAAnC,EAA4C;YACjDd,MAAM,CAAC,IAAI/D,KAAJ,CAAUiE,OAAO,CAACD,KAAR,CAAca,OAAxB,CAAD,CAAN;UACD,CAFM,MAEA;YACLd,MAAM,CAAC,IAAI/D,KAAJ,CAAU1B,sBAAV,CAAD,CAAN;UACD;QACF,CAZD;MAaD,CAdM,CAAP;IAeD;;;WAEO,sCAA0B;MAAA;;MAChC,KAAKiF,EAAL,CAAQ,aAAR,EAAuB,YAAK;QAC1B,IAAI,MAAI,CAAC/D,YAAT,EAAuB;UACrB,MAAI,CAACA,YAAL,CAAkBuH,IAAlB,CACE,MAAI,CAACjH,GADP,EAEE,YAAK;YACH,MAAI,CAAC8C,aAAL,CAAmBU,OAAnB,CAA2B;cACzBb,KAAK,EAAE,cADkB;cAEzBW,MAAM,EAAE;YAFiB,CAA3B;UAID,CAPH,EAQE,MAAI,CAAC1D,mBARP;QAUD;MACF,CAbD;MAeA,KAAK6D,EAAL,CAAQ,SAAR,EAAmB,YAAK;QACtB,IAAI,MAAI,CAAC/D,YAAT,EAAuB;UACrB,MAAI,CAACA,YAAL,CAAkBkG,KAAlB;QACD;MACF,CAJD;MAMA,KAAKnC,EAAL,CAAQ,mBAAR,EAA6B,UAACS,KAAD,EAAQC,OAAR,EAAmB;QAC9C,IAAQhB,OAAR,GAAoBgB,OAAO,CAACb,MAAR,CAAe,CAAf,CAApB,CAAQH,OAAR;;QACA,IAAItF,QAAQ,MAAM,MAAI,CAACiC,eAAL,CAAqB+G,QAArB,CAA8B1D,OAAO,CAACE,MAAtC,CAAlB,EAAiE;UAC/D,IAAM6D,aAAa,GAAGxJ,QAAQ,CAACE,mBAAD,CAA9B;;UACA,IAAIsJ,aAAJ,EAAmB;YACjBC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBH,aAAa,CAACG,IAArC;UACD;QACF;MACF,CARD;MAUA,KAAK5D,EAAL,CAAQ,mBAAR,EAA6B,UAACS,KAAD,EAAQC,OAAR,EAAmB;QAC9C,IAAID,KAAJ,EAAW;UACT,MAAI,CAACpB,aAAL,CAAmBU,OAAnB,CAA2B;YACzBb,KAAK,EAAE,OADkB;YAEzBW,MAAM,EAAE,CACN;cACEgE,IAAI,EAAE,uBADR;cAEEvC,OAAO,EAAEb,KAAK,CAACqD,QAAN;YAFX,CADM;UAFiB,CAA3B;QASD;;QACD,MAAI,CAACnH,WAAL,GAAmB+D,OAAO,CAACZ,EAA3B;QACA,MAAI,CAACb,MAAL,GAAcyB,OAAO,CAACb,MAAR,CAAe,CAAf,EAAkBZ,MAAhC;QACA,MAAI,CAAClB,QAAL,GAAgB2C,OAAO,CAACb,MAAR,CAAe,CAAf,EAAkB9B,QAAlC;QAEA,IAAMgG,eAAe,mCAChBrD,OADgB,GACT;UACVd,MAAM,EAAE;QADE,CADS,CAArB;;QAIA,MAAI,CAACP,aAAL,CAAmBU,OAAnB,CAA2BgE,eAA3B;MACD,CArBD;MAuBA,KAAK/D,EAAL,CAAQ,kBAAR,EAA4B,UAACS,KAAD,EAAQC,OAAR,EAAmB;QAC7C,IAAID,KAAJ,EAAW;UACT,MAAI,CAAC8C,sBAAL,CAA4B9C,KAAK,CAACa,OAAlC;QACD;;QACD,MAAI,CAACiC,sBAAL,CAA4B,sBAA5B,EAAoD7C,OAAO,CAACb,MAAR,CAAe,CAAf,CAApD;MACD,CALD;IAMD;;;WAEO,0BAAc;MAAA;;MACpB,KAAKhD,UAAL,CAAgBmD,EAAhB,CAAmB,SAAnB,EAA8B,UAACkD,aAAD;QAAA,OAC5B,MAAI,CAACc,uBAAL,CAA6Bd,aAA7B,CAD4B;MAAA,CAA9B;;MAIA,KAAKrG,UAAL,CAAgBmD,EAAhB,CAAmB,MAAnB,EAA2B;QAAA,OACzB,MAAI,CAACX,aAAL,CAAmBU,OAAnB,CAA2B;UAAEb,KAAK,EAAE,gBAAT;UAA2BW,MAAM,EAAE;QAAnC,CAA3B,CADyB;MAAA,CAA3B;;MAIA,KAAKhD,UAAL,CAAgBmD,EAAhB,CAAmB,OAAnB,EAA4B;QAAA,OAC1B,MAAI,CAACX,aAAL,CAAmBU,OAAnB,CAA2B;UAAEb,KAAK,EAAE,iBAAT;UAA4BW,MAAM,EAAE;QAApC,CAA3B,CAD0B;MAAA,CAA5B;;MAIA,KAAKhD,UAAL,CAAgBmD,EAAhB,CAAmB,OAAnB,EAA4B;QAAA,OAC1B,MAAI,CAACX,aAAL,CAAmBU,OAAnB,CAA2B;UACzBb,KAAK,EAAE,iBADkB;UAEzBW,MAAM,EAAE,CAAC,6BAAD;QAFiB,CAA3B,CAD0B;MAAA,CAA5B;;MAOA,KAAKhD,UAAL,CAAgB2G,IAAhB;IACD;;;WAIO,sBAAU;MAChB,IAAMzG,QAAQ,GAAG,KAAKA,QAAtB;MACA,IAAMuB,cAAc,GAAG,KAAKA,cAA5B;MACA,IAAMtB,OAAO,GAAG,KAAKA,OAArB;MACA,IAAMV,MAAM,GAAG2H,kBAAkB,CAAC,KAAK3H,MAAN,CAAjC;MACA,IAAMsB,GAAG,GAAG,KAAKA,GAAjB;MACA,IAAMrB,GAAG,aAAMQ,QAAN,cAAkBuB,cAAlB,cAAoCtB,OAApC,qBAAsDV,MAAtD,kBAAoEsB,GAApE,CAAT;MACA,OAAOrB,GAAP;IACD;;;WAEO,mBAAUA,GAAV,EAAqB;MAC3B,IAAM6D,MAAM,GAAoBxG,qBAAqB,CAAC2C,GAAD,CAArD;;MAEA,IAAI6D,MAAM,CAACrD,QAAP,KAAoB,KAAKA,QAA7B,EAAuC;QACrC,IAAI,CAACqD,MAAM,CAAC9B,cAAZ,EAA4B;UAC1B,MAAM7B,KAAK,CAAC,mDAAD,CAAX;QACD;;QACD,IAAM6B,cAAc,GAAG8B,MAAM,CAAC9B,cAA9B;;QAEA,IAAI,CAAC8B,MAAM,CAAC9D,MAAZ,EAAoB;UAClB,MAAMG,KAAK,CAAC,+CAAD,CAAX;QACD;;QACD,IAAMH,MAAM,GAAG4H,kBAAkB,CAAC9D,MAAM,CAAC9D,MAAR,CAAjC;;QAEA,IAAI,CAAC8D,MAAM,CAACxC,GAAZ,EAAiB;UACf,MAAMnB,KAAK,CAAC,wCAAD,CAAX;QACD;;QACD,IAAMmB,GAAG,GAAGwC,MAAM,CAACxC,GAAnB;QAEA,OAAO;UAAEU,cAAc,EAAdA,cAAF;UAAkBhC,MAAM,EAANA,MAAlB;UAA0BsB,GAAG,EAAHA;QAA1B,CAAP;MACD,CAjBD,MAiBO;QACL,MAAM,IAAInB,KAAJ,CAAUzB,iBAAV,CAAN;MACD;IACF;;;;qFAIO;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACF,KAAKY,UADH;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAEiB,KAAKA,UAAL,CAAgBuI,WAAhB,EAFjB;;cAAA;gBAEE/D,MAFF;gBAAA,mCAGGA,MAHH;;cAAA;gBAAA,mCAKC,IALD;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;iFAQA,mBACNgE,IADM;QAAA;QAAA;UAAA;YAAA;cAAA;gBAGAxG,GAHA,GAG0B,KAAKD,IAH/B;;gBAAA,MAIF,KAAK/B,UAAL,IAAmBgC,GAJjB;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAKqC,KAAKhC,UAAL,CAAgByI,OAAhB,CAAwBD,IAAxB,EAA8BxG,GAA9B,CALrC;;cAAA;gBAKEwC,MALF;gBAAA,mCAMGA,MANH;;cAAA;gBAAA,mCAQC,IARD;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;iFAWA,mBACNM,OADM;QAAA;QAAA;UAAA;YAAA;cAAA;gBAGA9C,GAHA,GAG0B,KAAKD,IAH/B;;gBAAA,MAIF,KAAK/B,UAAL,IAAmBgC,GAJjB;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OASa,KAAKhC,UAAL,CAAgB0I,OAAhB,CAAwB5D,OAAxB,EAAiC9C,GAAjC,CATb;;cAAA;gBAKEwC,MALF;gBAAA,mCAUGA,MAVH;;cAAA;gBAAA,mCAYC,IAZD;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;WAiBA,8BAAkB;MACxB,IAAIA,MAAM,GAAiC,IAA3C;;MACA,IAAI,KAAKtE,eAAT,EAA0B;QACxBsE,MAAM,GAAG,KAAKtE,eAAL,CAAqByI,UAArB,EAAT;MACD;;MACD,OAAOnE,MAAP;IACD;;;WAEO,8BAAkB;MACxB,IAAI,KAAKtE,eAAT,EAA0B;QACxB,KAAKA,eAAL,CAAqB0I,UAArB,CAAgC,KAAKhI,OAArC;MACD;IACF;;;WAEO,iCAAqB;MAC3B,IAAI,KAAKV,eAAT,EAA0B;QACxB,KAAKA,eAAL,CAAqB2I,aAArB;MACD;IACF;;;WAEO,iCAAqB;MAC3B,IAAI,KAAK1F,UAAT,EAAqB;QACnB,KAAKqC,kBAAL;MACD,CAFD,MAEO;QACL,KAAKI,qBAAL;MACD;IACF;;;WAIO,6BAAoBjE,cAApB,EAAsD;MAC5D,IAAI,CAACA,cAAc,CAACN,GAAhB,IAAuB,OAAOM,cAAc,CAACN,GAAtB,KAA8B,QAAzD,EAAmE;QACjE,MAAMR,KAAK,CAAC,uDAAD,CAAX;MACD;;MAED,IAAI,CAACc,cAAc,CAACmH,IAAhB,IAAwB,OAAOnH,cAAc,CAACmH,IAAtB,KAA+B,QAA3D,EAAqE;QACnE,MAAMjI,KAAK,CAAC,wDAAD,CAAX;MACD;;MAED,IAAI,CAACc,cAAc,CAACoH,KAAhB,IAAyB,OAAOpH,cAAc,CAACoH,KAAtB,KAAgC,QAA7D,EAAuE;QACrE,MAAMlI,KAAK,CAAC,yDAAD,CAAX;MACD;;MAED,IAAMmI,gBAAgB,GAAsB;QAC1CtI,MAAM,EAAE,KAAKA,MAD6B;QAE1CuE,KAAK,EAAE,KAAK1D,QAF8B;QAG1CuH,IAAI,EAAEnH,cAAc,CAACmH,IAHqB;QAI1CC,KAAK,EAAEpH,cAAc,CAACoH,KAJoB;QAK1CE,QAAQ,EAAE,EALgC;QAM1CC,QAAQ,EAAEvH,cAAc,CAACuH,QAAf,IAA2B;MANK,CAA5C;MASA,KAAK9E,EAAL,CAAQ,SAAR;QAAA,uEAAmB,mBAAOS,KAAP,EAA4BC,OAA5B;UAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA,KACbD,KADa;oBAAA;oBAAA;kBAAA;;kBAAA,MAETA,KAFS;;gBAAA;kBAKjB,IAAIlD,cAAc,CAACQ,QAAnB,EAA6B;oBACrB8G,QADqB,GACVnE,OAAO,CAACb,MAAR,CAAe,CAAf,EAAkB9B,QAAlB,CAA2BgH,IADjB;oBAE3BH,gBAAgB,CAACC,QAAjB,GAA4BA,QAA5B;kBACD;;kBARgB;kBAAA;kBAAA,OAWQG,KAAK,WAAIzH,cAAc,CAACN,GAAnB,WAA8B;oBACxD2C,MAAM,EAAE,MADgD;oBAExDqF,OAAO,EAAE;sBACPC,MAAM,EAAE,kBADD;sBAEP,gBAAgB;oBAFT,CAF+C;oBAMxDC,IAAI,EAAE5C,IAAI,CAACC,SAAL,CAAeoC,gBAAf;kBANkD,CAA9B,CAXb;;gBAAA;kBAWT3D,QAXS;kBAAA;kBAAA,OAoBIA,QAAQ,CAACmE,IAAT,EApBJ;;gBAAA;kBAoBTA,IApBS;;kBAAA,IAqBVA,IAAI,CAACC,OArBK;oBAAA;oBAAA;kBAAA;;kBAAA,MAsBP5I,KAAK,CAAC,mCAAD,CAtBE;;gBAAA;kBAAA;kBAAA;;gBAAA;kBAAA;kBAAA;kBAAA,MAyBTA,KAAK,CAAC,mCAAD,CAzBI;;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CAAnB;;QAAA;UAAA;QAAA;MAAA;IA4BD;;;;;;AAEH,eAAelB,SAAf","names":["parsePersonalSign","parseTransactionData","convertArrayBufferToHex","convertHexToArrayBuffer","getClientMeta","payloadId","uuid","formatRpcError","parseWalletConnectUri","convertNumberToHex","isJsonRpcResponseSuccess","isJsonRpcResponseError","isSilentPayload","getLocal","signingMethods","mobileLinkChoiceKey","isMobile","removeLocal","SocketTransport","ERROR_SESSION_CONNECTED","ERROR_SESSION_DISCONNECTED","ERROR_SESSION_REJECTED","ERROR_MISSING_JSON_RPC","ERROR_MISSING_RESULT","ERROR_MISSING_ERROR","ERROR_MISSING_METHOD","ERROR_MISSING_ID","ERROR_INVALID_RESPONSE","ERROR_INVALID_URI","ERROR_MISSING_REQUIRED","ERROR_QRCODE_MODAL_NOT_PROVIDED","ERROR_QRCODE_MODAL_USER_CLOSED","EventManager","SessionStorage","getBridgeUrl","Connector","opts","_clientMeta","connectorOpts","clientMeta","_cryptoLib","cryptoLib","_sessionStorage","sessionStorage","storageId","_qrcodeModal","qrcodeModal","_qrcodeModalOptions","qrcodeModalOptions","_signingMethods","bridge","uri","session","Error","_getStorageSession","handshakeId","_subscribeToSessionResponse","_transport","transport","protocol","version","url","subscriptions","clientId","_subscribeToInternalEvents","_initTransport","_subscribeToSessionRequest","pushServerOpts","_registerPushServer","_bridge","value","_key","key","_clientId","_peerId","peerMeta","_peerMeta","_handshakeTopic","_handshakeId","_uri","_formatUri","_parseUri","handshakeTopic","chainId","_chainId","networkId","_networkId","accounts","_accounts","rpcUrl","_rpcUrl","_connected","connected","peerId","event","callback","eventEmitter","_eventManager","subscribe","unsubscribe","instantRequest","_generateKey","request","_formatRequest","method","params","id","trigger","on","endInstantRequest","killSession","_sendCallRequest","result","createSession","Promise","resolve","reject","error","payload","pending","_sendSessionRequest","topic","sessionStatus","sessionParams","approved","response","jsonrpc","_sendResponse","_setStorageSession","sessionError","message","_formatResponse","_removeStorageSession","_manageStorageSession","_sendRequest","_handleSessionDisconnect","tx","parsedTx","chainParams","options","_subscribeToResponse","formattedRequest","formattedResponse","close","callRequest","_encrypt","encryptionPayload","JSON","stringify","silent","forcePushNotification","send","errorMsg","_subscribeToCallResponse","baseResponse","errorResponse","successResponse","transportClose","socketMessage","activeTopics","includes","parse","_decrypt","_handleSessionResponse","open","mobileLinkUrl","window","location","href","code","toString","internalPayload","_handleIncomingMessages","encodeURIComponent","decodeURIComponent","generateKey","data","encrypt","decrypt","getSession","setSession","removeSession","type","token","pushSubscription","peerName","language","name","fetch","headers","Accept","body","json","success"],"sourceRoot":"","sources":["../../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}