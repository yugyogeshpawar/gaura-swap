{"ast":null,"code":"import { useState, useLayoutEffect } from 'react';\nimport { shade } from 'polished';\nimport Vibrant from 'node-vibrant';\nimport { hex } from 'wcag-contrast';\nimport { ChainId } from '@uniswap/sdk';\nimport uriToHttp from 'utils/uriToHttp';\n\nasync function getColorFromToken(token) {\n  if (token.chainId === ChainId.RINKEBY && token.address === '0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735') {\n    return Promise.resolve('#FAAB14');\n  }\n\n  const path = `https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/${token.address}/logo.png`;\n  return Vibrant.from(path).getPalette().then(palette => {\n    if (palette === null || palette === void 0 ? void 0 : palette.Vibrant) {\n      let detectedHex = palette.Vibrant.hex;\n      let AAscore = hex(detectedHex, '#FFF');\n\n      while (AAscore < 3) {\n        detectedHex = shade(0.005, detectedHex);\n        AAscore = hex(detectedHex, '#FFF');\n      }\n\n      return detectedHex;\n    }\n\n    return null;\n  }).catch(() => null);\n}\n\nasync function getColorFromUriPath(uri) {\n  const formattedPath = uriToHttp(uri)[0];\n  return Vibrant.from(formattedPath).getPalette().then(palette => {\n    if (palette === null || palette === void 0 ? void 0 : palette.Vibrant) {\n      return palette.Vibrant.hex;\n    }\n\n    return null;\n  }).catch(() => null);\n}\n\nexport function useColor(token) {\n  const [color, setColor] = useState('#2172E5');\n  useLayoutEffect(() => {\n    let stale = false;\n\n    if (token) {\n      getColorFromToken(token).then(tokenColor => {\n        if (!stale && tokenColor !== null) {\n          setColor(tokenColor);\n        }\n      });\n    }\n\n    return () => {\n      stale = true;\n      setColor('#2172E5');\n    };\n  }, [token]);\n  return color;\n}\nexport function useListColor(listImageUri) {\n  const [color, setColor] = useState('#2172E5');\n  useLayoutEffect(() => {\n    let stale = false;\n\n    if (listImageUri) {\n      getColorFromUriPath(listImageUri).then(color => {\n        if (!stale && color !== null) {\n          setColor(color);\n        }\n      });\n    }\n\n    return () => {\n      stale = true;\n      setColor('#2172E5');\n    };\n  }, [listImageUri]);\n  return color;\n}","map":{"version":3,"names":["useState","useLayoutEffect","shade","Vibrant","hex","ChainId","uriToHttp","getColorFromToken","token","chainId","RINKEBY","address","Promise","resolve","path","from","getPalette","then","palette","detectedHex","AAscore","catch","getColorFromUriPath","uri","formattedPath","useColor","color","setColor","stale","tokenColor","useListColor","listImageUri"],"sources":["/Users/vaibhav/Desktop/Home/Blockchain Boutique/Uniswap_forked_gaura/src/hooks/useColor.ts"],"sourcesContent":["import { useState, useLayoutEffect } from 'react';\nimport { shade } from 'polished';\nimport Vibrant from 'node-vibrant';\nimport { hex } from 'wcag-contrast';\nimport { Token, ChainId } from '@uniswap/sdk';\nimport uriToHttp from 'utils/uriToHttp';\n\nasync function getColorFromToken(token: Token): Promise<string | null> {\n  if (token.chainId === ChainId.RINKEBY && token.address === '0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735') {\n    return Promise.resolve('#FAAB14');\n  }\n\n  const path = `https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/${token.address}/logo.png`;\n\n  return Vibrant.from(path)\n    .getPalette()\n    .then((palette) => {\n      if (palette?.Vibrant) {\n        let detectedHex = palette.Vibrant.hex;\n        let AAscore = hex(detectedHex, '#FFF');\n        while (AAscore < 3) {\n          detectedHex = shade(0.005, detectedHex);\n          AAscore = hex(detectedHex, '#FFF');\n        }\n        return detectedHex;\n      }\n      return null;\n    })\n    .catch(() => null);\n}\n\nasync function getColorFromUriPath(uri: string): Promise<string | null> {\n  const formattedPath = uriToHttp(uri)[0];\n\n  return Vibrant.from(formattedPath)\n    .getPalette()\n    .then((palette) => {\n      if (palette?.Vibrant) {\n        return palette.Vibrant.hex;\n      }\n      return null;\n    })\n    .catch(() => null);\n}\n\nexport function useColor(token?: Token) {\n  const [color, setColor] = useState('#2172E5');\n\n  useLayoutEffect(() => {\n    let stale = false;\n\n    if (token) {\n      getColorFromToken(token).then((tokenColor) => {\n        if (!stale && tokenColor !== null) {\n          setColor(tokenColor);\n        }\n      });\n    }\n\n    return () => {\n      stale = true;\n      setColor('#2172E5');\n    };\n  }, [token]);\n\n  return color;\n}\n\nexport function useListColor(listImageUri?: string) {\n  const [color, setColor] = useState('#2172E5');\n\n  useLayoutEffect(() => {\n    let stale = false;\n\n    if (listImageUri) {\n      getColorFromUriPath(listImageUri).then((color) => {\n        if (!stale && color !== null) {\n          setColor(color);\n        }\n      });\n    }\n\n    return () => {\n      stale = true;\n      setColor('#2172E5');\n    };\n  }, [listImageUri]);\n\n  return color;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}