{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getWindowMetadata = void 0;\n\nvar window_getters_1 = require(\"@walletconnect/window-getters\");\n\nfunction getWindowMetadata() {\n  var doc;\n  var loc;\n\n  try {\n    doc = window_getters_1.getDocumentOrThrow();\n    loc = window_getters_1.getLocationOrThrow();\n  } catch (e) {\n    return null;\n  }\n\n  function getIcons() {\n    var links = doc.getElementsByTagName(\"link\");\n    var icons = [];\n\n    for (var i = 0; i < links.length; i++) {\n      var link = links[i];\n      var rel = link.getAttribute(\"rel\");\n\n      if (rel) {\n        if (rel.toLowerCase().indexOf(\"icon\") > -1) {\n          var href = link.getAttribute(\"href\");\n\n          if (href) {\n            if (href.toLowerCase().indexOf(\"https:\") === -1 && href.toLowerCase().indexOf(\"http:\") === -1 && href.indexOf(\"//\") !== 0) {\n              var absoluteHref = loc.protocol + \"//\" + loc.host;\n\n              if (href.indexOf(\"/\") === 0) {\n                absoluteHref += href;\n              } else {\n                var path = loc.pathname.split(\"/\");\n                path.pop();\n                var finalPath = path.join(\"/\");\n                absoluteHref += finalPath + \"/\" + href;\n              }\n\n              icons.push(absoluteHref);\n            } else if (href.indexOf(\"//\") === 0) {\n              var absoluteUrl = loc.protocol + href;\n              icons.push(absoluteUrl);\n            } else {\n              icons.push(href);\n            }\n          }\n        }\n      }\n    }\n\n    return icons;\n  }\n\n  function getWindowMetadataOfAny() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var metaTags = doc.getElementsByTagName(\"meta\");\n\n    var _loop = function _loop(i) {\n      var tag = metaTags[i];\n      var attributes = [\"itemprop\", \"property\", \"name\"].map(function (target) {\n        return tag.getAttribute(target);\n      }).filter(function (attr) {\n        if (attr) {\n          return args.includes(attr);\n        }\n\n        return false;\n      });\n\n      if (attributes.length && attributes) {\n        var content = tag.getAttribute(\"content\");\n\n        if (content) {\n          return {\n            v: content\n          };\n        }\n      }\n    };\n\n    for (var i = 0; i < metaTags.length; i++) {\n      var _ret = _loop(i);\n\n      if (typeof _ret === \"object\") return _ret.v;\n    }\n\n    return \"\";\n  }\n\n  function getName() {\n    var name = getWindowMetadataOfAny(\"name\", \"og:site_name\", \"og:title\", \"twitter:title\");\n\n    if (!name) {\n      name = doc.title;\n    }\n\n    return name;\n  }\n\n  function getDescription() {\n    var description = getWindowMetadataOfAny(\"description\", \"og:description\", \"twitter:description\", \"keywords\");\n    return description;\n  }\n\n  var name = getName();\n  var description = getDescription();\n  var url = loc.origin;\n  var icons = getIcons();\n  var meta = {\n    description: description,\n    url: url,\n    icons: icons,\n    name: name\n  };\n  return meta;\n}\n\nexports.getWindowMetadata = getWindowMetadata;","map":{"version":3,"mappings":"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","names":["getWindowMetadata","doc","loc","window_getters_1","e","getIcons","links","getElementsByTagName","icons","i","length","link","rel","getAttribute","toLowerCase","indexOf","href","absoluteHref","protocol","host","path","pathname","split","pop","finalPath","join","push","absoluteUrl","getWindowMetadataOfAny","args","metaTags","tag","attributes","map","target","filter","attr","includes","content","getName","name","title","getDescription","description","url","origin","meta","exports"],"sourceRoot":"","sources":["../../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}