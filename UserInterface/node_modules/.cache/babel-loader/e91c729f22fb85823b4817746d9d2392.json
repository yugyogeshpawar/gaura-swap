{"ast":null,"code":"import { INITIAL_ALLOWED_SLIPPAGE, DEFAULT_DEADLINE_FROM_NOW } from '../../constants';\nimport { createReducer } from '@reduxjs/toolkit';\nimport { updateVersion } from '../global/actions';\nimport { addSerializedPair, addSerializedToken, removeSerializedPair, removeSerializedToken, updateMatchesDarkMode, updateUserDarkMode, updateUserExpertMode, updateUserSlippageTolerance, updateUserDeadline, toggleURLWarning, updateUserSingleHopOnly } from './actions';\n\nconst currentTimestamp = () => new Date().getTime();\n\nfunction pairKey(token0Address, token1Address) {\n  return `${token0Address};${token1Address}`;\n}\n\nexport const initialState = {\n  userDarkMode: null,\n  matchesDarkMode: false,\n  userExpertMode: false,\n  userSingleHopOnly: false,\n  userSlippageTolerance: INITIAL_ALLOWED_SLIPPAGE,\n  userDeadline: DEFAULT_DEADLINE_FROM_NOW,\n  tokens: {},\n  pairs: {},\n  timestamp: currentTimestamp(),\n  URLWarningVisible: true\n};\nexport default createReducer(initialState, builder => builder.addCase(updateVersion, state => {\n  // slippage isnt being tracked in local storage, reset to default\n  // noinspection SuspiciousTypeOfGuard\n  if (typeof state.userSlippageTolerance !== 'number') {\n    state.userSlippageTolerance = INITIAL_ALLOWED_SLIPPAGE;\n  } // deadline isnt being tracked in local storage, reset to default\n  // noinspection SuspiciousTypeOfGuard\n\n\n  if (typeof state.userDeadline !== 'number') {\n    state.userDeadline = DEFAULT_DEADLINE_FROM_NOW;\n  }\n\n  state.lastUpdateVersionTimestamp = currentTimestamp();\n}).addCase(updateUserDarkMode, (state, action) => {\n  state.userDarkMode = action.payload.userDarkMode;\n  state.timestamp = currentTimestamp();\n}).addCase(updateMatchesDarkMode, (state, action) => {\n  state.matchesDarkMode = action.payload.matchesDarkMode;\n  state.timestamp = currentTimestamp();\n}).addCase(updateUserExpertMode, (state, action) => {\n  state.userExpertMode = action.payload.userExpertMode;\n  state.timestamp = currentTimestamp();\n}).addCase(updateUserSlippageTolerance, (state, action) => {\n  state.userSlippageTolerance = action.payload.userSlippageTolerance;\n  state.timestamp = currentTimestamp();\n}).addCase(updateUserDeadline, (state, action) => {\n  state.userDeadline = action.payload.userDeadline;\n  state.timestamp = currentTimestamp();\n}).addCase(updateUserSingleHopOnly, (state, action) => {\n  state.userSingleHopOnly = action.payload.userSingleHopOnly;\n}).addCase(addSerializedToken, (state, _ref) => {\n  let {\n    payload: {\n      serializedToken\n    }\n  } = _ref;\n  state.tokens[serializedToken.chainId] = state.tokens[serializedToken.chainId] || {};\n  state.tokens[serializedToken.chainId][serializedToken.address] = serializedToken;\n  state.timestamp = currentTimestamp();\n}).addCase(removeSerializedToken, (state, _ref2) => {\n  let {\n    payload: {\n      address,\n      chainId\n    }\n  } = _ref2;\n  state.tokens[chainId] = state.tokens[chainId] || {};\n  delete state.tokens[chainId][address];\n  state.timestamp = currentTimestamp();\n}).addCase(addSerializedPair, (state, _ref3) => {\n  let {\n    payload: {\n      serializedPair\n    }\n  } = _ref3;\n\n  if (serializedPair.token0.chainId === serializedPair.token1.chainId && serializedPair.token0.address !== serializedPair.token1.address) {\n    const chainId = serializedPair.token0.chainId;\n    state.pairs[chainId] = state.pairs[chainId] || {};\n    state.pairs[chainId][pairKey(serializedPair.token0.address, serializedPair.token1.address)] = serializedPair;\n  }\n\n  state.timestamp = currentTimestamp();\n}).addCase(removeSerializedPair, (state, _ref4) => {\n  let {\n    payload: {\n      chainId,\n      tokenAAddress,\n      tokenBAddress\n    }\n  } = _ref4;\n\n  if (state.pairs[chainId]) {\n    // just delete both keys if either exists\n    delete state.pairs[chainId][pairKey(tokenAAddress, tokenBAddress)];\n    delete state.pairs[chainId][pairKey(tokenBAddress, tokenAAddress)];\n  }\n\n  state.timestamp = currentTimestamp();\n}).addCase(toggleURLWarning, state => {\n  state.URLWarningVisible = !state.URLWarningVisible;\n}));","map":{"version":3,"names":["INITIAL_ALLOWED_SLIPPAGE","DEFAULT_DEADLINE_FROM_NOW","createReducer","updateVersion","addSerializedPair","addSerializedToken","removeSerializedPair","removeSerializedToken","updateMatchesDarkMode","updateUserDarkMode","updateUserExpertMode","updateUserSlippageTolerance","updateUserDeadline","toggleURLWarning","updateUserSingleHopOnly","currentTimestamp","Date","getTime","pairKey","token0Address","token1Address","initialState","userDarkMode","matchesDarkMode","userExpertMode","userSingleHopOnly","userSlippageTolerance","userDeadline","tokens","pairs","timestamp","URLWarningVisible","builder","addCase","state","lastUpdateVersionTimestamp","action","payload","serializedToken","chainId","address","serializedPair","token0","token1","tokenAAddress","tokenBAddress"],"sources":["/Users/vaibhav/Desktop/Home/Blockchain Boutique/Uniswap_forked_gaura/src/state/user/reducer.ts"],"sourcesContent":["import { INITIAL_ALLOWED_SLIPPAGE, DEFAULT_DEADLINE_FROM_NOW } from '../../constants';\nimport { createReducer } from '@reduxjs/toolkit';\nimport { updateVersion } from '../global/actions';\nimport {\n  addSerializedPair,\n  addSerializedToken,\n  removeSerializedPair,\n  removeSerializedToken,\n  SerializedPair,\n  SerializedToken,\n  updateMatchesDarkMode,\n  updateUserDarkMode,\n  updateUserExpertMode,\n  updateUserSlippageTolerance,\n  updateUserDeadline,\n  toggleURLWarning,\n  updateUserSingleHopOnly,\n} from './actions';\n\nconst currentTimestamp = () => new Date().getTime();\n\nexport interface UserState {\n  // the timestamp of the last updateVersion action\n  lastUpdateVersionTimestamp?: number;\n\n  userDarkMode: boolean | null; // the user's choice for dark mode or light mode\n  matchesDarkMode: boolean; // whether the dark mode media query matches\n\n  userExpertMode: boolean;\n\n  userSingleHopOnly: boolean; // only allow swaps on direct pairs\n\n  // user defined slippage tolerance in bips, used in all txns\n  userSlippageTolerance: number;\n\n  // deadline set by user in minutes, used in all txns\n  userDeadline: number;\n\n  tokens: {\n    [chainId: number]: {\n      [address: string]: SerializedToken;\n    };\n  };\n\n  pairs: {\n    [chainId: number]: {\n      // keyed by token0Address:token1Address\n      [key: string]: SerializedPair;\n    };\n  };\n\n  timestamp: number;\n  URLWarningVisible: boolean;\n}\n\nfunction pairKey(token0Address: string, token1Address: string) {\n  return `${token0Address};${token1Address}`;\n}\n\nexport const initialState: UserState = {\n  userDarkMode: null,\n  matchesDarkMode: false,\n  userExpertMode: false,\n  userSingleHopOnly: false,\n  userSlippageTolerance: INITIAL_ALLOWED_SLIPPAGE,\n  userDeadline: DEFAULT_DEADLINE_FROM_NOW,\n  tokens: {},\n  pairs: {},\n  timestamp: currentTimestamp(),\n  URLWarningVisible: true,\n};\n\nexport default createReducer(initialState, (builder) =>\n  builder\n    .addCase(updateVersion, (state) => {\n      // slippage isnt being tracked in local storage, reset to default\n      // noinspection SuspiciousTypeOfGuard\n      if (typeof state.userSlippageTolerance !== 'number') {\n        state.userSlippageTolerance = INITIAL_ALLOWED_SLIPPAGE;\n      }\n\n      // deadline isnt being tracked in local storage, reset to default\n      // noinspection SuspiciousTypeOfGuard\n      if (typeof state.userDeadline !== 'number') {\n        state.userDeadline = DEFAULT_DEADLINE_FROM_NOW;\n      }\n\n      state.lastUpdateVersionTimestamp = currentTimestamp();\n    })\n    .addCase(updateUserDarkMode, (state, action) => {\n      state.userDarkMode = action.payload.userDarkMode;\n      state.timestamp = currentTimestamp();\n    })\n    .addCase(updateMatchesDarkMode, (state, action) => {\n      state.matchesDarkMode = action.payload.matchesDarkMode;\n      state.timestamp = currentTimestamp();\n    })\n    .addCase(updateUserExpertMode, (state, action) => {\n      state.userExpertMode = action.payload.userExpertMode;\n      state.timestamp = currentTimestamp();\n    })\n    .addCase(updateUserSlippageTolerance, (state, action) => {\n      state.userSlippageTolerance = action.payload.userSlippageTolerance;\n      state.timestamp = currentTimestamp();\n    })\n    .addCase(updateUserDeadline, (state, action) => {\n      state.userDeadline = action.payload.userDeadline;\n      state.timestamp = currentTimestamp();\n    })\n    .addCase(updateUserSingleHopOnly, (state, action) => {\n      state.userSingleHopOnly = action.payload.userSingleHopOnly;\n    })\n    .addCase(addSerializedToken, (state, { payload: { serializedToken } }) => {\n      state.tokens[serializedToken.chainId] = state.tokens[serializedToken.chainId] || {};\n      state.tokens[serializedToken.chainId][serializedToken.address] = serializedToken;\n      state.timestamp = currentTimestamp();\n    })\n    .addCase(removeSerializedToken, (state, { payload: { address, chainId } }) => {\n      state.tokens[chainId] = state.tokens[chainId] || {};\n      delete state.tokens[chainId][address];\n      state.timestamp = currentTimestamp();\n    })\n    .addCase(addSerializedPair, (state, { payload: { serializedPair } }) => {\n      if (\n        serializedPair.token0.chainId === serializedPair.token1.chainId &&\n        serializedPair.token0.address !== serializedPair.token1.address\n      ) {\n        const chainId = serializedPair.token0.chainId;\n        state.pairs[chainId] = state.pairs[chainId] || {};\n        state.pairs[chainId][pairKey(serializedPair.token0.address, serializedPair.token1.address)] = serializedPair;\n      }\n      state.timestamp = currentTimestamp();\n    })\n    .addCase(removeSerializedPair, (state, { payload: { chainId, tokenAAddress, tokenBAddress } }) => {\n      if (state.pairs[chainId]) {\n        // just delete both keys if either exists\n        delete state.pairs[chainId][pairKey(tokenAAddress, tokenBAddress)];\n        delete state.pairs[chainId][pairKey(tokenBAddress, tokenAAddress)];\n      }\n      state.timestamp = currentTimestamp();\n    })\n    .addCase(toggleURLWarning, (state) => {\n      state.URLWarningVisible = !state.URLWarningVisible;\n    })\n);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}