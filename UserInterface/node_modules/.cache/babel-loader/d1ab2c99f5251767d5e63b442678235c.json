{"ast":null,"code":"import { nanoid } from '@reduxjs/toolkit';\nimport { ChainId } from '@uniswap/sdk';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { getNetworkLibrary, NETWORK_CHAIN_ID } from '../connectors';\nimport { fetchTokenList } from '../state/lists/actions';\nimport getTokenList from '../utils/getTokenList';\nimport resolveENSContentHash from '../utils/resolveENSContentHash';\nimport { useActiveWeb3React } from './index';\nexport function useFetchListCallback() {\n  const {\n    chainId,\n    library\n  } = useActiveWeb3React();\n  const dispatch = useDispatch();\n  const ensResolver = useCallback(ensName => {\n    if (!library || chainId !== ChainId.MAINNET) {\n      if (NETWORK_CHAIN_ID === ChainId.MAINNET) {\n        const networkLibrary = getNetworkLibrary();\n\n        if (networkLibrary) {\n          return resolveENSContentHash(ensName, networkLibrary);\n        }\n      }\n\n      throw new Error('Could not construct mainnet ENS resolver');\n    }\n\n    return resolveENSContentHash(ensName, library);\n  }, [chainId, library]); // note: prevent dispatch if using for list search or unsupported list\n\n  return useCallback(async function (listUrl) {\n    let sendDispatch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    const requestId = nanoid();\n    sendDispatch && dispatch(fetchTokenList.pending({\n      requestId,\n      url: listUrl\n    }));\n    return getTokenList(listUrl, ensResolver).then(tokenList => {\n      sendDispatch && dispatch(fetchTokenList.fulfilled({\n        url: listUrl,\n        tokenList,\n        requestId\n      }));\n      return tokenList;\n    }).catch(error => {\n      console.debug(`Failed to get list at url ${listUrl}`, error);\n      sendDispatch && dispatch(fetchTokenList.rejected({\n        url: listUrl,\n        requestId,\n        errorMessage: error.message\n      }));\n      throw error;\n    });\n  }, [dispatch, ensResolver]);\n}","map":{"version":3,"names":["nanoid","ChainId","useCallback","useDispatch","getNetworkLibrary","NETWORK_CHAIN_ID","fetchTokenList","getTokenList","resolveENSContentHash","useActiveWeb3React","useFetchListCallback","chainId","library","dispatch","ensResolver","ensName","MAINNET","networkLibrary","Error","listUrl","sendDispatch","requestId","pending","url","then","tokenList","fulfilled","catch","error","console","debug","rejected","errorMessage","message"],"sources":["/Users/vaibhav/Desktop/Home/Blockchain Boutique/Uniswap_forked_gaura/src/hooks/useFetchListCallback.ts"],"sourcesContent":["import { nanoid } from '@reduxjs/toolkit';\nimport { ChainId } from '@uniswap/sdk';\nimport { TokenList } from '@uniswap/token-lists';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { getNetworkLibrary, NETWORK_CHAIN_ID } from '../connectors';\nimport { AppDispatch } from '../state';\nimport { fetchTokenList } from '../state/lists/actions';\nimport getTokenList from '../utils/getTokenList';\nimport resolveENSContentHash from '../utils/resolveENSContentHash';\nimport { useActiveWeb3React } from './index';\n\nexport function useFetchListCallback(): (listUrl: string, sendDispatch?: boolean) => Promise<TokenList> {\n  const { chainId, library } = useActiveWeb3React();\n  const dispatch = useDispatch<AppDispatch>();\n\n  const ensResolver = useCallback(\n    (ensName: string) => {\n      if (!library || chainId !== ChainId.MAINNET) {\n        if (NETWORK_CHAIN_ID === ChainId.MAINNET) {\n          const networkLibrary = getNetworkLibrary();\n          if (networkLibrary) {\n            return resolveENSContentHash(ensName, networkLibrary);\n          }\n        }\n        throw new Error('Could not construct mainnet ENS resolver');\n      }\n      return resolveENSContentHash(ensName, library);\n    },\n    [chainId, library]\n  );\n\n  // note: prevent dispatch if using for list search or unsupported list\n  return useCallback(\n    async (listUrl: string, sendDispatch = true) => {\n      const requestId = nanoid();\n      sendDispatch && dispatch(fetchTokenList.pending({ requestId, url: listUrl }));\n      return getTokenList(listUrl, ensResolver)\n        .then((tokenList) => {\n          sendDispatch && dispatch(fetchTokenList.fulfilled({ url: listUrl, tokenList, requestId }));\n          return tokenList;\n        })\n        .catch((error) => {\n          console.debug(`Failed to get list at url ${listUrl}`, error);\n          sendDispatch && dispatch(fetchTokenList.rejected({ url: listUrl, requestId, errorMessage: error.message }));\n          throw error;\n        });\n    },\n    [dispatch, ensResolver]\n  );\n}\n"],"mappings":"AAAA,SAASA,MAAT,QAAuB,kBAAvB;AACA,SAASC,OAAT,QAAwB,cAAxB;AAEA,SAASC,WAAT,QAA4B,OAA5B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,iBAAT,EAA4BC,gBAA5B,QAAoD,eAApD;AAEA,SAASC,cAAT,QAA+B,wBAA/B;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,qBAAP,MAAkC,gCAAlC;AACA,SAASC,kBAAT,QAAmC,SAAnC;AAEA,OAAO,SAASC,oBAAT,GAAiG;EACtG,MAAM;IAAEC,OAAF;IAAWC;EAAX,IAAuBH,kBAAkB,EAA/C;EACA,MAAMI,QAAQ,GAAGV,WAAW,EAA5B;EAEA,MAAMW,WAAW,GAAGZ,WAAW,CAC5Ba,OAAD,IAAqB;IACnB,IAAI,CAACH,OAAD,IAAYD,OAAO,KAAKV,OAAO,CAACe,OAApC,EAA6C;MAC3C,IAAIX,gBAAgB,KAAKJ,OAAO,CAACe,OAAjC,EAA0C;QACxC,MAAMC,cAAc,GAAGb,iBAAiB,EAAxC;;QACA,IAAIa,cAAJ,EAAoB;UAClB,OAAOT,qBAAqB,CAACO,OAAD,EAAUE,cAAV,CAA5B;QACD;MACF;;MACD,MAAM,IAAIC,KAAJ,CAAU,0CAAV,CAAN;IACD;;IACD,OAAOV,qBAAqB,CAACO,OAAD,EAAUH,OAAV,CAA5B;EACD,CAZ4B,EAa7B,CAACD,OAAD,EAAUC,OAAV,CAb6B,CAA/B,CAJsG,CAoBtG;;EACA,OAAOV,WAAW,CAChB,gBAAOiB,OAAP,EAAgD;IAAA,IAAxBC,YAAwB,uEAAT,IAAS;IAC9C,MAAMC,SAAS,GAAGrB,MAAM,EAAxB;IACAoB,YAAY,IAAIP,QAAQ,CAACP,cAAc,CAACgB,OAAf,CAAuB;MAAED,SAAF;MAAaE,GAAG,EAAEJ;IAAlB,CAAvB,CAAD,CAAxB;IACA,OAAOZ,YAAY,CAACY,OAAD,EAAUL,WAAV,CAAZ,CACJU,IADI,CACEC,SAAD,IAAe;MACnBL,YAAY,IAAIP,QAAQ,CAACP,cAAc,CAACoB,SAAf,CAAyB;QAAEH,GAAG,EAAEJ,OAAP;QAAgBM,SAAhB;QAA2BJ;MAA3B,CAAzB,CAAD,CAAxB;MACA,OAAOI,SAAP;IACD,CAJI,EAKJE,KALI,CAKGC,KAAD,IAAW;MAChBC,OAAO,CAACC,KAAR,CAAe,6BAA4BX,OAAQ,EAAnD,EAAsDS,KAAtD;MACAR,YAAY,IAAIP,QAAQ,CAACP,cAAc,CAACyB,QAAf,CAAwB;QAAER,GAAG,EAAEJ,OAAP;QAAgBE,SAAhB;QAA2BW,YAAY,EAAEJ,KAAK,CAACK;MAA/C,CAAxB,CAAD,CAAxB;MACA,MAAML,KAAN;IACD,CATI,CAAP;EAUD,CAde,EAehB,CAACf,QAAD,EAAWC,WAAX,CAfgB,CAAlB;AAiBD"},"metadata":{},"sourceType":"module"}