{"ast":null,"code":"import _classCallCheck from \"/Users/vaibhav/Desktop/Home/Blockchain Boutique/Uniswap_forked_gaura/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/vaibhav/Desktop/Home/Blockchain Boutique/Uniswap_forked_gaura/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/vaibhav/Desktop/Home/Blockchain Boutique/Uniswap_forked_gaura/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/vaibhav/Desktop/Home/Blockchain Boutique/Uniswap_forked_gaura/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport EventEmitter from \"eventemitter3\";\nimport { XMLHttpRequest } from \"xhr2-cookies\";\nimport { getFromWindow } from \"@walletconnect/utils\";\nvar XHR = getFromWindow(\"XMLHttpRequest\") || XMLHttpRequest;\n\nvar HTTPConnection = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(HTTPConnection, _EventEmitter);\n\n  var _super = _createSuper(HTTPConnection);\n\n  function HTTPConnection(url) {\n    var _this;\n\n    _classCallCheck(this, HTTPConnection);\n\n    _this = _super.call(this);\n    _this.url = url;\n    return _this;\n  }\n\n  _createClass(HTTPConnection, [{\n    key: \"formatError\",\n    value: function formatError(payload, message) {\n      var code = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n      return {\n        error: {\n          message: message,\n          code: code\n        },\n        id: payload.id,\n        jsonrpc: payload.jsonrpc\n      };\n    }\n  }, {\n    key: \"send\",\n    value: function send(payload, internal) {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        if (payload.method === \"eth_subscribe\") {\n          var error = _this2.formatError(payload, \"Subscriptions are not supported by this HTTP endpoint\");\n\n          _this2.emit(\"error\", error);\n\n          return resolve(error);\n        }\n\n        var xhr = new XHR();\n        var responded = false;\n\n        var res = function res(err, result) {\n          if (!responded) {\n            xhr.abort();\n            responded = true;\n\n            if (internal) {\n              internal(err, result);\n            } else {\n              var id = payload.id,\n                  jsonrpc = payload.jsonrpc;\n              var response = err ? {\n                id: id,\n                jsonrpc: jsonrpc,\n                error: {\n                  message: err.message,\n                  code: err.code\n                }\n              } : {\n                id: id,\n                jsonrpc: jsonrpc,\n                result: result\n              };\n\n              _this2.emit(\"payload\", response);\n\n              resolve(response);\n            }\n          }\n        };\n\n        xhr.open(\"POST\", _this2.url, true);\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n        xhr.timeout = 60 * 1000;\n        xhr.onerror = res;\n        xhr.ontimeout = res;\n\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState === 4) {\n            try {\n              var response = JSON.parse(xhr.responseText);\n              res(response.error, response.result);\n            } catch (e) {\n              res(e);\n            }\n          }\n        };\n\n        xhr.send(JSON.stringify(payload));\n      });\n    }\n  }]);\n\n  return HTTPConnection;\n}(EventEmitter);\n\nexport default HTTPConnection;","map":{"version":3,"mappings":"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","names":["EventEmitter","XMLHttpRequest","getFromWindow","XHR","HTTPConnection","url","payload","message","code","error","id","jsonrpc","internal","Promise","method","formatError","emit","resolve","xhr","responded","res","err","result","abort","response","open","setRequestHeader","timeout","onerror","ontimeout","onreadystatechange","readyState","JSON","parse","responseText","e","send","stringify"],"sourceRoot":"","sources":["../../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}